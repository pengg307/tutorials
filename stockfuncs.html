<html>
<body>
通达信公式教程<br>★★★<br>(1)供初学者操作指南<br>公式入门<br>我们大多数的用户并不是完全了解“公式编辑器”的意义，简单地，我们可以从以下几个角度进行理解：<br>一、指标分析：<br>“公式编辑器”好比是一个工作母床，通过这个工作母床可以制造出所需要的各式各样的零件，同样，在指标分析的工作中，利用编辑器可以编写出相应的分析条件，这种方法是在技术分析当中最为常用的方法之一。例如，指标KD、指标MA等等，通过对这些指标的观察、分析，找出一些合适的条件作为买入卖出点。当然，我们也许需要的是一些自己的指标，一些自己的准确的指标，更多的MB、MC、MD等等，这一切我们通过“公式编辑器”可以实现。<br>二、条件选股：<br>编写公式都要用到什么东西？<br>我们留下了许多问题--都是公式编写的基础问题，所以我们这节课来解决这些基础的问题。<br>什么是技术指标？<br>MA均线就是一种技术指标，我们在炒股的时候，经常会将一些行情数据进行数学计算得出一些曲线等等，方便我们掌握股市的变动情况。<br>什么是条件选股？<br>简单讲，就是按照您的设定的条件用电脑帮助您完成一些太多太复杂的挑选--比如您有一些好的心得和方法，可使有1000多只股票，您就是有100双眼睛有时也不一定可以看得过来，这时电脑就派上用场了！<br>什么是参数？<br>比如讲：10日均线，您可以把10日当作参数，好处在于，您觉得需要修改成5日的时候，就可以使用一些简单的方法，例如参数精灵来很方便的修改和调整。参数需要名字，例如M就不错。还要规定参数的范围，例如1日至260日。这样我们就可以在1到260之间任意调节M的值了，M最常用的数填在“缺省”一栏，例如你最喜欢用10日均线，那就填10吧。<br>什么是周期？<br>这么解释吧！我们有的投资者喜欢使用日线图作技术分析；有的喜欢用5分钟的K线；有的喜欢使用长一点时间的，例如周线。所以在公式设计中，允许不同喜好的使用者选择不同的分析时间--就是可以选择不同的周期。<br>什么是函数？<br>函数在公式编写非常重要，如果作个比喻，我们用一种语言去告诉电脑我的想法，并且让它去帮我做，那么函数就是这种语言的单词。<br>我们在公式编辑器中选择插入函数，就可以看到里面有许多的函数，我们在附录中有一个简表，大家可以到那里去检索！<br>例一：<br>一根K线有四个价格组成：<br>最高价：HIGH<br>收盘价：CLOSE<br>最低价：LOW<br>开盘价：OPEN<br>成交量：VOL<br>成交额：AMO<br>例二：<br>两条均线不断地交叉，就专门设定了一条函数来描述两条线交叉：CROSS（X，Y）<br>假如下图中的两条均线一条名叫X，另外一条叫Y<br>CROSS（X，Y）表示X向上穿过了Y<br>CROSS（Y，X）表示Y向上穿过了X<br>例三：<br>前面的CLOSE，还是VOL，都表示当天，或者您使用的不是日线，那就表示本周期的数据，那么前几天的怎么表示呢？<br>REF（X，M）<br>例如：<br>REF（Close，5）表示5天前的收盘；<br>REF（Vol，10）表示10天前的成交量；<br>这里的M就是参数，您现在明白了什么是参数了吗？<br>例四：<br>如果我想把两个条件并列在一起怎么办？<br>AND<br>X AND Y就表示条件X和条件Y<br>好了！本课结束吧--有点稍慢，下面会好一些！<br>编写一条最简单的指标线<br>通过前几课的学习，我们今天开始使用软件的公式编辑功能编写我们自己的第一条指标线。<br>其实不难，你应该对自己有信心！<br>按照主菜单-工具-公式管理-选择-“技术指标”-点击“新建”，然后在公式编辑器中留下你的第一行脚印吧！<br>点击：“确认”，现在看一下我们第一条指标线。<br>这条指标线与你的想法相符吗？<br>总结与补充：<br>1、如果选择：“主图叠加”，我们的指标线会与K线图显示在同一个图形框中，现在我们的指标线显示在其下方，即“副图”中；<br><br><br>★★★<br>通达信公式教程(2): 2、参数可以有，也可以没有，但是鼓励大家设置参数，这是非常好的习惯； 3、一个句子完了，别忘了以分号结尾； 你的公式写得对不对，可以通过“测试公式”来检查，如果错了，它会告诉你错在哪里。 编写最常用的均量<br>　　<br>2、参数可以有，也可以没有，但是鼓励大家设置参数，这是非常好的习惯；<br>3、一个句子完了，别忘了以分号结尾；<br>你的公式写得对不对，可以通过“测试公式”来检查，如果错了，它会告诉你错在哪里。<br>编写最常用的均量和均价线<br>均价线，不就是那个“移动平均线MA”什么的吗？不过，话说回来，听说10个人里面有11个人都在使用，我可得学习学习！<br>原理是？？<br>5日平均线=（今天收盘价+昨天收盘价+.....--5天前的收盘价）/5；<br>10日平均线=（今天收盘价+昨天收盘价+......+10天前的收盘价）/10；<br>150日平均线=（今天收盘价+昨天收盘价+......+150天前的收盘价）/150；<br>200日平均线......不是这么麻烦吧？难道我每天都要写这么多得数才得到一条平均线？？？？<br>你有什么办法？<br>MA1=MA（CLOSE，5）；<br>MA2=MA（CLOSE，10）；<br>MA3=MA（CLOSE，50）；<br>......<br>当然是有简单的方法了！你把我在上面说过的话写下来，按照前面几课讲的，写在公式的编辑栏当中就可以了！<br>注意：<br>“MA”表示的就是计算平均值。<br>在括号内写上计算的对象和计算的时间长度。<br>MA1，MA2，MA3......是好几条指标线，别忘记了用分号把它们分开。<br>最后呢？电脑自己会把它们一起画出来。<br>均量线？？？<br>均价线都有了，照着葫芦画瓢，把收盘价CLOSE换成成交量VOL就行了！<br>MA1：MA（VOL，5）；<br>MA2：MA（VOL，10）；<br>MA3：MA（VOL，150）；<br>MA4：MA（VOL，200）；<br>今天有几只发生MA金叉？<br>我们学习了编写MA移动平均线，关于这几条指标线如何使用？我想大家可能都比我清楚。例如短期均线和长期均线发生了金叉或者死叉，......等等，葛兰维尔的八项法则......如果说如何用软件编写一个条件，让电脑把今天两个市场的股票中所有发生了黄金交叉的股票选出来呢？<br>想知道吗？这就是“条件选股”，按照“条件”电脑自动“选择股票”出来，可以供您分析，要不然的话，技术分析的投资者都会累死了！<br>跟我学！<br>第一步：“工具”栏中选中“公式管理器”<br>第二步：我们现在选择“新建”一个“条件选股”公式，结果出现了下面的编辑栏！然后在里面写上您的条件！<br>第三步：按照说明书上的步骤选股就行了！<br>注意：<br>1、在条件选股中点击“新建”；<br>2、原来MA5：MA（CLOSE，5）；<br>表示的是一条指标线，可是现在我们在条件选股当中只要引用它，不需要把它画出来。所以我们在冒号的后面加一个符号，表示等会要引用它：MA5：=MA（CLOSE，5）；<br>这个在的公式编辑中，叫做“中间表达式”。<br>X=1；<br>Y=X+1；<br>Y=？<br>我们学过上面的数学，都知道把X=1代入到Y的计算中去，“X=1；”就是一个中间表达式，您明白了吗？<br>条件选股总结：<br>1、指标和条件选股在结构上没有差别，只是在内容上，条件选股要多加上我们的条件，比如大于10，或者交叉等等！<br>2、中间表达式可以帮助我们清晰的表达我们的公式，不至于使公式的结构特别的混乱！<br>如何编写BIAS指标？<br>如果大家都是均线的忠实爱好者的话，那么大家一定牢牢记得在均线大师哥南威尔的8大法则当中的第四条和第五条中曾经提到了当股价偏离均线太远的时候，便会向它靠拢，但是并不提到多远才会靠拢--为了解决这个问题，也为了我们更好地用客观数据来体现股价运动的过程，乖离率这个指标应运而生。<br>本课我们的任务就是通过对乖离率的原理到编写方法的学习来加强我们对公式设计的理解。<br>首先，什么是乖离率？<br>以当日的均线价格为准，股价和均价之间的差距称为乖离程度，以乖离程度除以均价的百分比就是乖离率。<br>当日股价与10日均线的乖离率=（当日股价-10日均价）/10日均价*100；<br>当日股价与20日均线的乖离率=（当日股价-20日均价）/20日均价*100；<br>当日股价与30日均线的乖离率=（当日股价-30日均价）/30日均价*100；<br><br>★★★<br>通达信公式教程(3): 原理就是这么简单，可是怎么使用呢？您别急，所用的指标其实都是在观察当中得出一定的启示，您先实现这几条指标线，让它们以图形的方式出现在您的面前，然后您再去观察，一定会事半功倍！ 比如编写10日乖离率 第一<br>　　<br>原理就是这么简单，可是怎么使用呢？您别急，所用的指标其实都是在观察当中得出一定的启示，您先实现这几条指标线，让它们以图形的方式出现在您的面前，然后您再去观察，一定会事半功倍！<br>比如编写10日乖离率<br>第一步：乖离率的命名，崇尚人家的习惯，依旧使用BIAS，那么第一条就叫做BIAS1好了！<br>第二步：当日股价用CLOSE表示；<br>10均价我们在前一节课刚刚学过，顺手拈来，用MA（CLOSE，10）表示；<br>第三步：一样使用加减乘除符号以及括号，只是要注意只有小括号，没有中大括号，那么公式就有了--<br>BIAS1：（CLOSE-MA（CLOSE，10））/MA（CLOSE，10）*100；<br>这样的话我们在技术指标编辑器中将另外两条指标也同样写下来，就得到了BIAS指标，请看下图：<br>第四步：就是您得自己好好观察您的指标公式在各个股票的表现，得出您自己的结论，因为每一个投资者即使是在使用同样一个指标的时候，都会有不同的理解，我们无法判断优劣，但是有一条可以告诉我们答案，那就是永远让市场说话，因为它永远是对的！<br>如果您不介意的话，可以参考BIAS，不过仅供参考！<br>您明白怎么编写了吗？我能不能直接用写好的指标公式？<br>我想用KD指标选股，能不能直接写成“D＞20”就可以执行了？<br>当然可以！考虑到了这种偷懒的做法，所以我们一共提供了两种供偷懒的人士使用，其中一种与上面的要求只是在写法上稍有不同！<br>第一个方法：<br>第一步：在条件选股的编辑器中点击“引入指标公式”。<br>引入“其他公式”。然后，我们从中选择一个，例如“KD”，让我们来看一下结果如何？<br>第二步：上一步的操作结果请看右边的图形，系统自动的把KD指标的整个编写内容搬来了！<br>现在需要我们做的就是：续上一行条件“D＜20”，OK！完成！<br>有没有简单的方法？<br>第二个方法：就一句话：“KDJ，D”＜20；<br>“KDJ，D”<br>表示现在我要是用KDJ指标当中的D指标，不过大家要看清楚是怎么写的哦！写错了计算机可是不会改错的！<br>总结：<br>用上面的方法可以引用所有指标，所以不必写那么多！<br>注意格式上，两边用引号括起来，指标名称KDJ和指标线名称D之间用“，”隔开！<br>额外加餐<br>现在我们可以很方便的做另外一件事了，我们可以将通常说的KDJ买入条件完整的表达出来了：<br>“KD指标发生了黄金交叉，并且D＜20”<br>T1：=“KDJ，K”；--引用K线；<br>T2：=“KDJ，D”；--引用D线；<br>条件： AND在中就表示“并且”，将两个条件并列起来<br>CROSS（T1，T2）ANDT2＜20；<br>第九课 放量、缩量、上涨、下跌、收阳、收阴<br>在前面的学习当中，我们见到了一些基本的表达方法、方式，今天我们的任务是学习一些常见的概念如何编写，例如上面所列出来的放量、上涨等等，因为这些都是在公式编写过程当中要用到的基本的小的形态特征，许多的技术指标的选股条件都是由它们组成的。<br>放量：<br>1、今日比昨日的成交量放大了1倍：<br>VOL/REF（VOL，1）＞2；<br>2、今日的五日均量比前五天的五日均量放大了3倍：<br>AA：=MA（VOL，5）；<br>BB：=REF（AA，5）；<br>AA/BB＞4；<br>3、今天的成交量达到了整个流通盘的10%以上：<br>VOL/CAPITAL＞10/100；<br>（注意，10%的表达式是10/100，或者0.1）<br>缩量：<br>1、今日比昨日的成交量缩小了1倍：<br>VOL/REF（VOL，1）＜0.5；<br>2、今日的五日均量比前五天的五日均量缩小了一半：<br>AA：=MA（VOL，1）＜0.5；<br>BB：=REF（AA，5）；<br>AA/BB＜0.5；<br>3、今天的成交量不足整个流通盘的0.5%：<br>VOL/CAPITAL＜0.5/100；<br>上涨：<br>1、今日涨幅达到了7%以上：<br>CLOSE/REF（CLOSE，1）＞1.07；<br>2、十日均价继续上涨：<br>AA：=MA（CLOSE，10）；<br>BB：=REE（AA，1）；<br>AA＞BB；<br>下跌：<br>同上面的表达方式一样，将方向改变了而已：<br><br>★★★<br>通达信公式教程(4)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(4): 收阳、收阴： 1、当天收阳：CLOSE＞OPEN； 2、当天收阴：CLOSE＜OPEN； 高开、低开： 1、当天股价高开，言下之意开盘高于昨日收盘：OPEN＞REF（CLOSE，1）； 2、当天股价低开：OPEN＜REF（CLOSE，1）； 跳空： 跳空<br>　　<br>收阳、收阴：<br>1、当天收阳：CLOSE＞OPEN；<br>2、当天收阴：CLOSE＜OPEN；<br>高开、低开：<br>1、当天股价高开，言下之意开盘高于昨日收盘：OPEN＞REF（CLOSE，1）；<br>2、当天股价低开：OPEN＜REF（CLOSE，1）；<br>跳空：<br>跳空亦有向上和向下两种：<br>当日开盘在昨日最高之上，即为向上跳空：OPEN＞REF（HIGH，1）；<br>反之，开盘小于昨日的最高价，为向下跳空：POEN＜REF（LOW，1）；<br>事实上，我们在编公式的过程，就是将这些条件有机地结合起来作为我们判断的条件。举一个很简单的例子，如果是K线形态呈现出放量上攻的态势，那么如何编写这个公式呢？高开高走又应该如何编写呢？<br>我们把放量和上涨的两个条件组合在一起，让某一天的形态特征同时满足两个条件就达到目的；同样地将高开的高走两个条件结合在一起，也就找到了我们所需的条件。<br>结果就是：<br>放量上攻之一，以上面所举例组合：<br>AA：=VOL/REF（VOL，1）＞2；<br>BB：=CLOSE/REF（CLOSE，1）＞1.07；<br>AA AND BB；<br>高开高走：<br>AA：=OPEN＞REF（CLOSE，1）；<br>BB：=CLOSE＞OPEN；<br>AA AND BB；<br>OK！本课到此结束，留下一个问题，看看您有没有真正的理解，向上跳空之后两天内并未回补如何编写呢？<br>提示：实际上就是昨天发生了跳空缺口，这两天的最低价一直在两天前的最高价之上。<br>AA：=REF（OPEN，1）＞REF（HIGH，2）；<br>BB：=REF（LOW，1）＞REF（HIGH，2）；<br>CC：=LOW＞REF（HIGH，2）；<br>AA AND BB AND CC；<br>仔细一想，若BB成立，AA一定成立，AA实际上没有存在的必要，你想通了吗？<br>更简单的方法，下面的一句话可以的上面的四句：<br>COUNT（LOW＞REF（HIGH，2），2）=2；<br>第十课 涨停板攻击？<br>学了这么多了，应该教点实战的内容了！我们来学习一下别人的经验，“涨停板追击”，同时这里面还润孕育着一个简单但是又颇有意义的道理！<br>一、量化的概念<br>我们都知道，按规定涨幅不得超过10%，但是由于四舍五入的关系，常常有9.98%、10.23%等等的涨停板，所以我们要找一个合适的数值，然后用公式语言告诉计算机，这个过程学名叫量化！<br>比如我们考察之后，决定让大于9.99%的都为涨停。<br>二、编写公式<br>其实就一句话：今日收盘除以昨日收盘的值大于1.0999<br>X：=CLOSE/REF（CLOSE，1）＞1.0999；<br>三、测试我们的条件<br>大家都知测试的功能，要不然你怎么知道你的经验在历史上的表现是好还是不好呢？<br>按照下图指引进入条件选股的界面，之后选中您的条件，具体办法请参见（使用说明书）。然后填入测试时间和测试标准！<br>在这里我们的测试方法是：<br>测试时间是从2000/01/01到2001/03/02，测试股票共计583只，初始投入100，000元。<br>当满足买入公式中定义的条件时，也就是涨停板时，按照收盘价使用相同资金买入一只股票，当满足以下平仓条件时按照收盘价平仓；买入5日后强制平仓或者亏损达到3%止损平仓或者利润达到5%止赢平仓，然后按照以上的规则统计在测试的时间段内的所有交易的状况。<br>这是一种追涨的短线方法，所以测试的时间我们只用5天，目标利润为5%，（非常抱歉，因为其中的设置和选择方法十分灵活而且需要较好的理解能力，所以我们在这里就不介绍具体的内容了）<br>点击开始测试！一切OK！来看结果吧！<br>1、从成功率上看，实际达到5%的获利要求的交易次数67.89%，我们已经比较满意这个结果了，可是要用于实战，可不可以再提高呢？<br>2、所谓的提高就是优化的一个内容，简单说，优化就是让它更好！优化我们的条件，让它的表现更好！<br>3、加上一个缩量的条件，比如当日成交量小于5日的均量；Y：=VOL＜MA（VOL，5）；大家可以做一下测试，看看结果如何！以下是同样测试条件下的结果。 X AND Y；<br>您满意吗？我们的成功率已达到了80%，剩下的任务就是您如何操作的问题了！<br><br>★★★<br>通达信公式教程(5)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(5): 注：请大家考虑一下在实战当中，如果您按此买入可不可行？ 总结：编写公式并不是为了编公式而编写复杂的公式，您个人对某一个特征或者形态的理解最重要。所以光有经验不够，您还得把它转化成您自己的应对策略！您需<br>　　<br>注：请大家考虑一下在实战当中，如果您按此买入可不可行？<br>总结：编写公式并不是为了编公式而编写复杂的公式，您个人对某一个特征或者形态的理解最重要。所以光有经验不够，您还得把它转化成您自己的应对策略！您需要不断总结、测试、优化您的公式。<br>第十一课 多头排列--良好的上升趋势<br>均线的多头排列一直以来都被大家视为一种良好的上升趋势的表现，因为这种形态的形成需要较长的时间，和较大的能量，而被主力或者庄家利用作为骗线的可能性就比较小，股市当中也遵循惯性的原理，当一个趋势形成之后，要改变它，是不容易的，因为股价有着沿着原来的运动方向上的惯性！<br>首先，让我们来看看几种多头排列：<br>5、10、30日均线：5、10、30日均线：30、60、90日均线：<br>在图一中和图二中我们采用的是同一周期的均线，即都是5、10、30日均线，我们可以观察到在同一周期下的均线排列有相同之处，也有很大不同之处：图一中的5日均线=10日均线、30日均线平滑优美，而在图二中的5日和10日均线不断的碰及30日均线然后上升；<br>在图三中我们选用的是30、60、90日均线，相对来说均线的多头排列也显得很平滑。<br>为什么会有这样的差别呢？如果您要是认真一点的话，就可以发现原来前两图的K线走得不一样，一个一波拉到头，一个分成几波拉到头，而在图三当中我们采用了较长周期的均线系统，从而在一定程度上过滤了这种现象，具体在使用的过程中，您可要多注意它们的区别！<br>好了，我们来看一下如何编写，拿第一个为例，观察它们的特征：<br>5/10/30日均线依次从上而下的排列，这种情况维持一段时间，假设我们这里定为4天以上：<br>5/10/30日均线依次从上而下的排列：<br>AA：=MA（CLOSE，5）；<br>BB：=MA（CLOSE，10）；<br>CC：=MA（CLOSE，30）；<br>T1：=AA＞BB AND BB＞CC；<br>以上情况维持一段时间，假设我们这里定为4天以上：<br>COUNT（T1，4）=4；<br>COUNT（X，N）表示统计在N天内满足条件X的有几天。<br>最终的结果就是如下所示：<br>AA：=MA（CLOSE，5）；<br>BB：=MA（CLOSE，10）；<br>CC：=MA（CLOSE，30）；<br>T1：=AA＞BB AND BB＞CC;<br>COUNT（T1，4 ）=4<br>编写完毕，我们在上面的例子当中，举的是最简单的一个，其实您在编写的过程当中，还可以加上一些比较准确地描述，以取得更好的效果，例如同时三条均线向上发散等，当然还有您自己的心得。<br>第十二课 逃顶K线形态之--黄昏之星<br>一、概念学习<br>当市场出现一条大阳线后，通常会产生跳空高开的情况，有时便会出现十字星或类似十字星的小阴线（小阳线）。另一种相反的情况是出现在一条大阴线后，在这两种情况下形成的类似十字星的K线都被称为“星型线”。<br>当该形态出现在一段上升行情的当中，就很容易形成所谓的经典K线形态--黄昏之星。<br>二、编制过程<br>通过我们前面的学习，其实已经可以比较轻松的编制这个条件了--前人已经清晰地把这个形态的具体特征描述出来，剩下的工作就是把这些特征用数字表示--这就是前面提到的量化的过程！<br>该图组合一共由三根K线合成，我们按照以下的步骤一步一步地一边寻找每日K线的特征，一边进行编写：<br>为了结构简单起见，首先将二天的高开低收用中间表达式表达出来，因为我们在后面的编写过程中会分别使用到这些数据。<br>1、今日K线的：开-a1, a1：=open；<br>收-a2， a2：=close；<br>高-a3, a3：=high；<br>2、昨天K线的：开-b1, b1：=ref(open，1)；<br>收-b2， b2：=ref(close，1)；<br>高-b3， b3：=ref(high，1)；<br>低-b4， b4：=ref(low，1)；<br>3、前天K线的：开-c1, c1：=ref(open，2)；<br>收-c2, c2：=ref(close，2)；<br>高-c3, c3：=ref(high，2)；<br>低-c4, c4：=ref(low，2)；<br>4、我们将会分别描述出三天的K线形态，然后汇总，首先我们观察今日K线的特征，今天是一根低开低走的大阴线，我们给它一些数字上的定义：<br><br>★★★<br>通达信公式教程(6)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(6): a、今日开盘价小于昨日收盘价； aa:=a1＜b2 and b、今日的阴线实体较长，我们用开盘价和收盘价相比，长度大于4%：a1/a2＞1.04； 5、昨日K线的特征，是一根十字形态的K线，并且在左右两根K线之上，分别表达为： a、<br>　　<br>a、今日开盘价小于昨日收盘价； aa:=a1＜b2 and<br>b、今日的阴线实体较长，我们用开盘价和收盘价相比，长度大于4%：a1/a2＞1.04；<br>5、昨日K线的特征，是一根十字形态的K线，并且在左右两根K线之上，分别表达为：<br>a、昨日跳开，高于前天的收盘： bb：=b1＞c3<br>b、昨日收盘同样在缺口之上： and b2＞c3<br>c、线形实体长度很小，也就是昨日开盘和收盘之差比昨日开盘的值小于0.01：and abs(b1-b2)/b1＜0.01<br>d、K线有上下影线，可以表示为最高价和最低价不等于收盘价也不等于开盘价：and b3＞b1 and b3＞b2 and b4＜b1 and b4＜b2<br>e、当日的最高价为20天以来的最高价： and b3=hhv(high，20)；<br>6、前日K线的特征：股价大幅上扬，幅度较前一日收盘高出4%并且收盘大于开盘：cc:=c2/ref(close，3)＞1.04 and c2＞c1；<br>综合选股条件：最后我们将三天的K线特征会合起来，合成一个最后的条件就是由图所示内容： aa and bb and cc<br>三、选股的结果<br>我们把上面的条件按照前面章节所讲的方法带入到公式选股条件当中去检验。<br>按下图作为标准<br>四、总结<br>其实到底是难还是不难呢？其实不难，只是你要细心一点把一个一个的条件组合起来，有机地结合起来！我们的许多形态就是这样由一个一个的K线组合起来的结果！<br>1、我们测试了将近4年的时间，一共找到了几个这样的信号，您满意吗？--应该说，不满意！可是原因在哪里呢？--我们的条件过于苛刻，因为要同时满足的条件太多，您可以尝试更改一些条件以获得更多的信号！<br>2、大家还会发现有的信号出现的位置不好，例如西飞国际，因为我们其中有一个条件不是很好，不过您可以做到将它去掉--告诉我您可以做到，算是课后作业吧，我看相对高位dd:=b3=hhv（high，20），怎么看都不舒服，您有什么办法？<br>突破底部横盘整理创新高！<br>“横的越长，竖的越高”，业内业外一直流传这样一句话。真实的讲，它描绘了股票的价格在一定的范围上下波动，如果有庄家主力在其中悄悄吸纳......直到某一天股价一鹤冲天！沉寂时间越长，爆发力越惊人！<br>正所谓“三年不鸣，一鸣惊人”......<br>公式编写：<br>我们寻找各种特征，并用数字表示出来：“长期”设定为150天；“横盘”设定股价在150日均线上下15%波动；放量；并且股价创下150天以来的历史新高！<br>1、首先用公式描述放量<br>a、将会使用5日均量来进行比较，成交量比昨日成交量放大两倍；<br>b、V1是五日均量，REF（V1，1）就是昨日的均量；<br>V1：=MA（VOL，5）； V2：=VOL/REF（V1，1）＞2；<br>2、长期横盘<br>a、PZ1是当天150日均价： PZ1：=MA（CLOSE，M）；<br>b、PZ2是150日的最高价； PZ2：=HHV（HIGH，M）；<br>c、PZ3是150日的最低价； PZ3：=LLV（LOW，M）；<br>d、PZ4是150日的最高价和150日均价的距离的百分比，PZ5刚好相反是最低价和均价的差的百分比； PZ4：=（PZ2-PZ1）/PZ1； PZ5：=（PZ1-PZ3）/PZ1；<br>e、设为股价在150日均线上下15%波动，也就是PZ4、PZ5都小于0.15；<br>PZ：=REF（PZ4，1）＜0.5 AND REF（PZ5，1）＜0.15；<br>3、今天创下历史新高，也就是今天的最高价是150天内的最高价！ TP1：HHV（HIGH，M）； TP：=HIGH=TP1；<br>综合三个条件的最后的逻辑判断式就是我们的最后结论！ V2 AND PZ AND TP（参数M=150天）<br>这样，您将上面多写的内容，简单的编入到公式编辑器中去，我们的工作就已经做完了，剩下的测设，大家请按照我们前面所讲的内容去做，只有不断地完善你的公式，把它和实战结合起来，形成您自己的特点的操作体系，您才算是有了自己的武器！<br>函数介绍：<br>HHV（X，M）<br>表示X在M天内的最高值！<br>例如：<br>HHV（HIGH，150）每日最高价在150天内的最大值<br>HHV（VOL，150）每日成交量在150天内的最大值<br>LLV（X，M） <br><br>★★★<br>通达信公式教程(7)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(7): 表示X在M天内的最小值 例如： LLV（LOW，10）每日最低价在10天内的最小值 HHV（VOL，20）每日成交量在20天内的最小值 好了！ 第十课我们也讲完了，我们来回顾一下我们的课程，做一个最后的总结！ 事实上，编写公式<br>　　<br>表示X在M天内的最小值<br>例如：<br>LLV（LOW，10）每日最低价在10天内的最小值<br>HHV（VOL，20）每日成交量在20天内的最小值<br>好了！<br>第十课我们也讲完了，我们来回顾一下我们的课程，做一个最后的总结！<br>事实上，编写公式并不是一件很难的事情！他并不是为编写复杂的公式而在编写公式，恰如孔乙己会写四种回字又有何意义？重要的是您要深刻地理解某一点、某一处--没有人可以全部了解这个市场，可是也很少有人能够潜下心来去想清楚一个问题。<br>在编写公式的时候，大家一定体会到了，由于计算机的使用给我们带来了巨大的方便，可使计算机并不是完全智能化的，所以它只是一个工具，还有着许多的重要的工作需要人去完成，您千万不能放弃了自己而去迷信一个工具，可能它是您的帮手，但目前来说，无法替代您！您的投资还得由您去做！<br>《公式教程》公式读书------量能决定趋势<br>量能动力的分析要点<br>由于目前市场上的优质上市公司有限，供求关系决定着投资者的盈亏。这样大盘与个股的历史量能、即时量能、潜在量能与市场机会的多寡有着直接关系。一般情况下，大盘的成交量能大机会就多，大盘的成交量能小机会就少，上述情况均与大盘的涨跌无关。<br>个股的量能决定趋势运行的可靠性，主要公式有：<br>（1）、量能大+涨得多=继续大涨（适合强势中买进使用）<br>使用该公式时，注意强势中量比、量能、涨幅榜与开收盘用。<br>（2）、量能大+涨得少=注意反转（适合强势中卖出使用）<br>使用该公式时，注意K线的高低位与应用公式。<br>（3）、量能小+涨得多=注意反转（适合弱势中卖出使用）<br>使用该公式时，注意与庄股斗法。<br>（4）、量能小+涨得少=继续小涨（适合盘整势中买进使用）<br>使用该公式时，注意K线的低位庄股。<br>（5）、量能大+跌得多=继续大跌（适合弱势中卖出使用）<br>每年年底这种股票比较多。<br>（6）、量能大+跌得少=注意反转（适合弱势中买进使用）<br>使用该公式时，注意K线的高低位与逻辑公式。<br>（7）、量能小+跌得少=继续小跌（适合弱势中换股使用）<br>使用该公式时，注意目标股是否减仓。<br>（8）、量能小+跌得多=注意反转（适合弱势中买进使用）<br>这种情况是弱势中的天赐良机。<br>第一步 慨念公式化<br>上述讲座中提到的名词有：<br>量能：成交量 函数：vol;<br>趋势：股价走势 [公式短语]趋势:=100*(close-ref(close,n))/ref(close,n);<br>强势：趋势向上 [公式短语]趋势&gt;0;<br>量能大：区间换手率大 [公式短语]sum(hsl,n)&gt;2*n;<br>量比：今日量与前五日均量之比 [公式短语]100*vol/ma(vol,5);<br>涨得多：涨幅高 [公式短语] 100*(close-ref(close,n))/ref(close,n)&gt;=1.5*n;<br>"量能大+涨得多=继续大涨" ：[公式短语] 继续大涨:=sum(hsl,n)&gt;=3*n and 100*(close-ref(close,n))/ref(close,n)&gt;=3*n;<br>"量能大+涨得少=注意反转"：[公式短语] 注意反转:=sum(hsl,n)&gt;=3*n and 100*(close-ref(close,n))/ref(close,n)&lt;=n;<br>"量能小+涨得多=注意反转"：[公式短语] 注意反转:=sum(hsl,n)&lt;=0.5*n and 100*(close-ref(close,n))/ref(close,n)&gt;=3*n;<br>"量能小+涨得少=继续小涨"：[公式短语] 继续小涨:=sum(hsl,n)&lt;=0.5*n and 100*(close-ref(close,n))/ref(close,n)&lt;=n;<br>"量能大+跌得多=继续大跌"：[公式短语] 继续大跌:=sum(hsl,n)&gt;=3*n and 100*(close-ref(close,n))/ref(close,n)&gt;=-3*n;<br>"量能大+跌得少=注意反转"：[公式短语] 注意反转:=sum(hsl,n)&gt;=3*n and -n&lt;100*(close-ref(close,n))/ref(close,n)&lt;0;<br>"量能小+跌得少=继续小跌"：[公式短语] 继续小跌:=m(hsl,n)&lt;=0.5*n and -n&lt;100*(close-ref(close,n))/ref(close,n)&lt;0;<br>"量能小+跌得多=注意反转"：[公式短语] 注意反转:=sum(hsl,n)&lt;=0.5*n and 100*(close-ref(close,n))/ref(close,n)&lt;=-3*n;<br><br>★★★<br>通达信公式教程(8)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(8): 第二步 公式图形化 量能动力 公式 量能:SUM(HSL,N),NODRAW; 涨幅: 100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N),NODRAW; STICKLINE(HSL=1,HSL,0,1,1),COLORBROWN; STICKLINE(HSL1 AND HSL3,HSL,0,1,0),COLORLIBLUE; STIC<br>　　<br>第二步 公式图形化<br>量能动力 公式<br>量能:SUM(HSL,N),NODRAW;<br>涨幅: 100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N),NODRAW;<br>STICKLINE(HSL&lt;=1,HSL,0,1,1),COLORBROWN;<br>STICKLINE(HSL&gt;1 AND HSL&lt;3,HSL,0,1,0),COLORLIBLUE;<br>STICKLINE(HSL&gt;=3,HSL,0,1,0),COLORMAGENTA;<br>继续大涨: DRAWTEXT(量能&gt;3*N AND 涨幅&gt;3*N,HSL,'继续大涨'),COLORRED;<br>继续小涨: DRAWTEXT(量能&lt;0.5*N AND 涨幅&lt;N,HSL,'继续小涨'),COLORMAGENTA;<br>继续小跌: DRAWTEXT(量能&lt;0.5*N AND 涨幅&gt;-N AND 涨幅&gt;0,HSL,'继续小跌'),COLORLIGREEN;<br>继续大跌: DRAWTEXT(量能&gt;3*N AND 涨幅&lt;-3*N,HSL,'继续大跌'),COLORCYAN;<br>注意反转: DRAWTEXT(((量能&gt;3*N AND 涨幅&lt;N) OR (量能3*N)<br>OR (量能&gt;3*N AND 涨幅&gt;-N AND 涨幅&lt;0) OR (量能&lt;0.5*N AND 涨幅&lt;-3*N)),HSL,'注意反转'),COLORBLUE;<br>-----------------------------------------<br>财务指标的写法！<br>【市净率】:CLOSE/FINANCE(35),NODRAW;<br>【市盈率】:CLOSE/(FINANCE(30)/FINANCE(1)/10000),NODRAW;<br>【换手率】:HSX,VOLSTICK;<br>【净收益率】:FINANCE(30)/FINANCE(1)/100/FINANCE(34),NODRAW;<br>【流通盘】:FINANCE(7),NODRAW,NODRAW;<br>【净资产】:FINANCE(34),NODRAW;<br>【每股收益】:FINANCE(30)/FINANCE(1)/10000,NODRAW;<br>---------------------------------------------<br>均线函数说明<br>//简单移动平均:MA(X,N)=(X1+X2+X3+...+Xn)/N<br>//异同移动平均:EMA(X,N),EXPMA(X,N):EMA=(2*X+(N-1)*EMA[i-1])/(N+1)<br>//平滑移动平均:MEMA(X,N):EMA[N-1]=MA(X,N),MEMA=(X+(N-1)*MEMA[i-1])/N;<br>//加权平滑平均:EXPMEMA(X,N):EXPMEMA[N-1]=MA(X,N),EXPMEMA=(2*X+(N-1)*EXPMEMA[i-1])/(N+1)<br>//累积平均:SMA(X,N,P):SMA=(P*X+(N-P)*SMA[i-1])/N<br>送给爱好公式的股友<br>公式的作用---送给爱好公式的股友<br>有学员问我：“公式没什么用----涨三天金叉，跌三天死叉；涨七天超涨，跌七天超跌。公式那么多用什么好？”<br>目前，我国还没有程式交易咨询公司，公式只停留在娱乐论坛、股评解盘、祖传秘方中，有的软件营销业者将公式商业化到既不可信又好笑的地步，大有狗皮膏药之嫌。有“公式不可信”的观念的人，说明他们在证券分析中，上了一个台阶。前进一步就到了对“操盘方案”的探讨，更进一步就会上到“程式交易”的新天地。公式的作用就如同工具一样，看你怎么用。<br>例如：有一个操盘方案，短期头寸调整方法为：<br>换手率&lt; 0.5,买进10%；<br>RSI(12)&lt; 25,加仓20%；<br>单日跌5%加仓10%；<br>换手率&gt; 5,卖出清仓；<br>没有公式就无法完成买卖。要识别价值高估的股票单个公式还远远不够。因为高估的股票往往同时具有很高的波动性、价量背离、同类股票走势离差大、与大盘相关系数小等等属性。所以不能仅仅停留在玩公式这个层面。把市场内在的运作方式和股票之间历史和理论上的关系编程计算机语言--公式，就是你鱼杆、鱼网，小心呵护，就会带来利润和娱乐。<br>技术分析派认为：价格是最重要的，其他的因素可以不计；我们现在将股价的变化看成很多自变条件是结果，分析的思维方式变得复杂不堪。有的朋友将七项变量写成一个公式，结果不如20日均线。公式复杂化容易，简单就要用心。用简单地公式做成交易提示，是一件快乐的事。走进了公式误区的朋友，回过头来看看工具的作用，也就理解公式的作用。崇拜思想用于公式是不大合适。<br>选股-----被股民用来判断股评家水平高低的标准。在目前的情况下，大盘与个股联动强烈的今天，在同类股票中（叠加即可看清楚），选股的意义不大。如：0005、0404、0852、007、买卖时机相同，盈亏比例相近，至于指标、K线形态上的差异就不必细究了。目前有800多只股票与大盘相近，还在增加。就此看：跑赢大势应是举手之劳，可跑赢大势仍是基金操盘手现在和未来的理想。从国内外基金经理的述职报告中都可见“跑赢大势”的艰难。<br><br>★★★<br>通达信公式教程(9)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(9): 编辑公式首先要能读懂K线或者实时图。我们知道：趋势类公式只在牛市行情中期才有用，追涨的方法也是在此时才有用武之地。对于一些有明显缺点的股票，就不需公式帮助了。设立简单的预警即可。如：散户股的换手率方法<br>　　<br>编辑公式首先要能读懂K线或者实时图。我们知道：趋势类公式只在牛市行情中期才有用，追涨的方法也是在此时才有用武之地。对于一些有明显缺点的股票，就不需公式帮助了。设立简单的预警即可。如：散户股的换手率方法。有些方法如：K线组合论明显不对（打开多日走势图就得知）；周期分析至今还是猜想（只能事后演义）；波浪理论简直可笑（但她的哲学基础至今无论能敌）；价量关系已有了无可争议之结论（下载区），叠加分析可能是我国股市未来的热门投机分析方法（叠加分析类的公式用处不大，因为叠加很直观，无需公式的蛇足了）。目前公式适用最多的地方在均线类、反趋势类的实战技法中。公式排序的公式就是画蛇添鞋了。而公式大有可为的地方，在于它是套利对冲、操盘方案、程式交易的建筑材料，是猜想与理论实证工具。<br>大家迷信公式的同时不要忘记：<br><br>“股价在任何一点都可转向，没有一定要涨，或者一定要跌的道理”<br>公式要实现“参数的自动调整”，使用时机判断。参数自动调整问题：大家可效仿“济安线”的均线周期自动调整原理；时机类公式很少，有信趣的可来贴提出个人要求，我会考量满足你。<br>简单公式1.1 技术指标公式编辑器技术指标公式即通常所说画线指标，此类公式的主要目的是通过对数据采取一定的运算，将输出结果直观的显现在分析图上，为投资者提供研判行情的基本依据。此类指标至少要有一条输出线，本系统允许最多6条的输出线。技术指标公式编辑器实现对技术图表分析中各类技术指标和自我定义的技术分析指标的编写，并且通过TDX的分析界面形成图表、曲线，以方便和寻找有意义的技术图形和技术特征。<br>1.2 条件选股公式编辑器也就是通常意义上解释的智能选股。但我们的目的在于建立一个完全开放、自由的选股平台，可以通过对该平台的熟练使用，借助计算机的高速和准确的检索功能寻找满足您的理解的股票形态和技术特征，作到先知先觉，快人一步！并且提供相应的同样开放式的结果检测报告。<br>1.3 五彩K线公式编辑器准确讲，该编辑器的功能是附属于条件选股功能之上的，我们可以通过该功能将满足条件的连续K线形态赋予颜色，区别了其它的K线。条件选股公式与五彩K线公式的区别：条件选股公式和五彩K线公式都有且仅有一个输出，其目的都是为投资者提供买入或卖出点的指示，不同之处在于：条件选股公式仅对最近数据提示买入或卖出，而五彩K线公式则对输入的所有历史数据进行提示。另外，五彩K线公式的输出是在K线图上，通过各种颜色对提示数据进行标识，条件选股公式的输出是找出符合最近条件的所有股票。<br>1.4 交易系统公式编辑器交易系统公式是通过设定买入和卖出点(有且仅有这两个输出)，由计算机进行模拟操作。以此为依据，系统一方面可以进行五彩K线公式的功能，同时提示买入和卖出；另一方面可以通过模拟操作，对指标买卖的收益、指标的最佳参数及最佳指标等各情形进行测试。交易系统是在条件选股功能上的一次大的延伸，旨在建立一套完整的交易规则体系，通过该编辑器对各个相关的交易环节，包括买入的切入、卖出、止损以及整体的交易性能检验等等作出定量的规定，帮助投资者建立一套属于自己的买卖规则和理论。<br>TDX系统所有的分析方法，包括技术指标、条件选股、交易系统和五彩K线，均采用开放平台进行描述。也就是说，所有分析方法的算法对用户时开放的，任何人都可以对原算法进行修改，或增加自己的新算法。<br>快捷键：〖Ctrl〗+〖F〗在公式管理器中，用户可以对系统公式进行全面管理，包括新建公式，修改公式算法、引入、输出公式、设置组合条件等。公式管理器用树形结构显示系统中存在的所有分析方法，包括指标公式、条件选股公式、交易系统公式、五彩K线公式和组合条件。需要对哪一类公式进行处理，可以用鼠标点取将该类公式展开，直到找到需要的公式名称。查找公式可以从公式组、全部、系统和自编四种列表方始中选择，公式组方式便于分类管理，全部方式便于有公式名称直接查找，系统方式便于系统内置常用指标的快速查找，而自编方式则便于查找自己编写的或从外部引入的公式。<br>★★★<br>通达信公式教程(10)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(10): 公式管理器可管理四种类型的公式：指 标 公式：用于指标图形的绘制。条件选股公式：用于条件选股。交易系统公式：用于专家指示及测参、测指。五彩Ｋ线公式：用于Ｋ线模式指示。这四种公式相互独立，名称可以相同，<br>公式管理器可管理四种类型的公式：指 标 公式：用于指标图形的绘制。条件选股公式：用于条件选股。交易系统公式：用于专家指示及测参、测指。五彩Ｋ线公式：用于Ｋ线模式指示。这四种公式相互独立，名称可以相同，但其内容和作用不同。每种类型的公式包括四种形式：系统加密公式：用绿色图标和锁形符号显示，要进行密码确认系统公式：用绿色图标显示，可进行删改用户加密公式：用红色图标和锁形符号显示，要进行密码确认用户公式：用红色图标显示，可进行删改指标公式附加买卖逻辑判断式，得到交易系统公式；指标公式附加选股条件逻辑判断式，得到条件选股公式。指标公式附加色彩逻辑判断，得到五彩K线公式。<br>调出公式管理器方法：<br>1.点击〖新建〗或〖修改〗按钮；<br>2.鼠标左键单击指标线、指标参数选中指标，再用右键单击，弹出的对话框中选中“修改指标公式”，系统弹出公式编辑器。公式编辑其中包含许多输入窗口和按钮，功能分别为：〖公式名称〗用于识别公式，最多可以有9个字符，该名称在每一类分析方法必须唯一，例如不能出现两个MA技术指标，但可以出现一个MA技术指标和一个MA条件选股指标。〖公式描述〗简单描述该指标的用途，可以输入任意字符。〖密码保护〗选中密码保护，表示将对该公式加密，加密密码输入到密码输入框中。对于已加密的公式，今后对它进行修改和查看必须先输入密码，在输出公式到文件时也需要密码。要去掉密码，点击“密码保护”，使它前面的√消失即可。〖画线方法〗这组单选按钮用于指定指标公式类型，紧密围绕股票价格变化的指标可定为主图叠加类型，叠加在主图上显示；否则定为副图指标，显示在副图上。（仅在编辑技术指标公式时出现）〖参数〗公式可以带有0-6个参数，使用参数可以方便地使用中需要修改得数值进行调整。每个参数需要设定参数名称、最小值、最大值和缺省值。〖坐标位置〗可指定在某些特殊位置画水平坐标线，例如对RSI，可以输入：0;20;50;系统将在这三个数值处绘制三条水平坐标线。缺省时为“自动”，即系统据实际情况定水平坐标线。（深红色线）（仅在编辑副图技术指标时出现）〖额外Y轴分界〗：在副图坐标中显示重要的数值分界线（白色线）；〖测试公式〗检查公式的语法错误。〖引入指标公式〗以系统已有的某个指标公式为蓝本，新建自己的指标公式。〖插入函数〗显示选择函数对话框，帮助您在通达信函数集中寻找所需函数。当您对系统提供的标准函数还不熟时，这个功能可帮你节省时间。〖用法注释〗供用户输入指标算法、用法的解释，在使用公式时提示操作方法及注意事项。〖动态提示〗用户输入指标、算法或函数时，同步提示中文语意。〖参数精灵〗在使用分析工具时，很多时候用户都需要调整参数，但很多用户无法理解对参数调整的实际意义。使用参数精灵，可以将参数调整及参数意义放在同一段文字中，方便用户使用。用户在使用分析方法时，会在指标旁边显示参数精灵的内容。参数精灵的内容是由公式剪辑者输入的一段文字，该文字描述了参数的使用方法，并且可以将参数设置与文字混合编辑。<br>方法是用Param#N来代替参数即可。例如：公式中有两个参数M和N，需要描述当M日均线与N日均线金叉时买入，可以这样写参数精灵： Param#1日均线与Param#2日均线发生金叉，发出买入信号在实际使用该分析方法时，系统将显示： 5日均线与10日均线发生金叉，系统发出买入信号其中被包围在输入框中的5和10是参数，用户可以直接修改这些参数，而实际运算时将采用这些参数进行计算。使用参数精灵大大降低了公式的使用难度。<br>〖公式编辑窗〗公式编辑窗用于书写分析方法的算法，是公式编辑器的核心部分。用户可以将自己的算法用公式语法书写到编辑窗中，关于公式语法请参见附录。公式编辑器在使用上十分灵活，支持丰富的键盘操作和鼠标操作。<br>第2节公式编写规则所有的公式系统都是遵守统一的运算法则，统一的格式进行函数之间的计算，所以我们掌握了技术指标公式的基本原理，其他的公式也不会出脱其外。例如指标公式：KDJ，右键点击KDJ，选择“编辑公式”后打开公式算法编辑器，显示出KDJ指标公式的内容。参数名称:缺省值,最小值,最大值 N:9,1,10O M1:3,2,40 M2:3,2,40 RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100; K:SMA(RSV,M1,1)； D:SMA(K,M2,1); J:3*K-2*D；该公式绘制K、D、J三条指标线。RSV行是一个中间语句，计算当期收盘价与N天内最低价之差除以N内最高价与最低价之差的比值，再乘以系数100。K线为RSV的M1天移动平均线，D线为线K的M2天移动平均线，J线为K线与J线的差值<br>★★★<br>通达信公式教程(11)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(11): 简单公式编辑第2节 公式编写规则 所有的公式系统都是遵守统一的运算法则，统一的格式进行函数之间的计算，所以我们掌握了技术指标公式的基本原理，其他的公式也不会出脱其外。例如指标公式：KDJ，右键点击KDJ，选择<br>　　<br>简单公式编辑第2节 公式编写规则<br>所有的公式系统都是遵守统一的运算法则，统一的格式进行函数之间的计算，所以我们掌握了技术指标公式的基本原理，其他的公式也不会出脱其外。例如指标公式：KDJ，右键点击KDJ，选择“编辑公式”后打开公式算法编辑器，显示出KDJ指标公式的内容。<br>参数名称:缺省值,最小值,最大值<br>N:9,1,10O<br>M1:3,2,40<br>M2:3,2,40<br>RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;<br>K:SMA(RSV,M1,1)；<br>D:SMA(K,M2,1);<br>J:3*K-2*D；<br>该公式绘制K、D、J三条指标线。RSV行是一个中间语句，计算当期收盘价与N天内最低价之差除以N内最高价与最低价之差的比值，再乘以系数100。K线为RSV的M1天移动平均线，D线为线K的M2天移动平均线，J线为K线与J线的差值。<br>指标数据引用：<br>经常地编制公式的过程当中，需要使用另外一个指标的值，如果按照通常的做法，重新编写过这个指标显得麻烦，因此有必要学习使用如何调用别的指标公式。<br>基本的格式为：“指标．指标线”(参数)<br>a) 指标和指标线之间用逗号分开，一个指标不—定只有一条指标线，所以有必要在指标后标注指标线的名称，但是如果缺失则表示引用最后一条指标线。<br>b) 参数在表达式的末尾，必须用括号括起来，参数之间用逗号分开，通过参数设置可以选择设定该指标的参数，如果参数缺失则表示使用该指标的默认参数设置。<br>c) 整个表达式用引号引在其中，除参数以外。例如：“MACD．DEA”(26,12,9)表示计算MACD指标的DEA指标线。计算参数为26、11、9， “MACD”(26,12,9)表示该指标的最后一条指标线，计算参数是26、12、9， “MACD”表示该指标的最后—条指标线并且使用公式的默认参数。<br>B 跨周期引用指标数据:<br>a) 引用大盘数据：引用大盘数据时使用下列函数： INDEXC/NDEXV，等等!<br>b) 引用个股数据:引用个数据时使用下列格式：“股票代码$数据”．在以上格式当中调用CLOSE，VOL，AMOUNT等等！例如“000002$VOL'表000002该股本周期的成交量。“999998$CLOSE"同样也可以表示为A股指数本周期的收盘价，此时的A股指数被视为一只个股。<br>C 其它股票数据引用：<br>使用以下的格式可以在当前的分析界面下引用大盘的数据或者其它个股的数据实现横向上的对比。<br>a) 引用大盘数据：引用大盘数据时使用下列函数： INDEXC/NDEXV，等等!<br>b) 引用个股数据:引用个数据时使用下列格式：“股票代码$数据”．在以上格式当中调用CLOSE，VOL，AMOUNT等等！例如“000002$VOL'表000002该股本周期的成交量。“999998$CLOSE”同样也可以表示为A股指数本周期的收盘价，此时的A股指数被视为一只个股。<br>A公式语句<br>所有的公式体由若干语句按照一定的格式组成，每个语句表示一个计算结果，根据各个语句的功能分为两大类语句，一类是赋值语句，一类是中间表达式。<br>B赋值语句：<br>在技术指标“B：AZ”和“c：B*0.618”就是分别两条指标线，语句间用分号隔开。该语句被称为赋值语句，在技术指标当中，赋值语句的计算结果将会被计算机执行并形成相应的图形。每个语句可以有一个名称，该名称写在语句的最前面，并用一个冒号将它与语句分隔开。例如：ST：MA(CLOSE，5)；表示该语句求收盘价的五日均线，语句的名称为ST。在该语句后的语句中可以直接用ST来替代MA(CLOSE，5)，例如：MA(ST， 5)表示对收盘价的五日均线再求五日平均。<br>C中间语句；<br>一个语句如果不需要显示，可以将它定义为中间语句，例如在上例当中的第一句“A：=X+Y；”，这样该语句就不会披系统辨认为是指标线了。中间语句用“：=”替代冒号，其它与一般语句完全一样。使用中间语句可以有效降低公式的书写难度，还可以将需要重复使用的语句定义成中间语句以减少计算量。每个公式最多可以分6个语句，中间公式数量没有限制，所有语句之间需要使用分号隔开。<br><br>★★★<br>通达信公式教程(12)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(12): D公式计算符 公式计算符将函数连接成为公式。计算分为算术计算符和逻辑计算符。 a)算术计算符 包括十、一、*、／，它们分别对计算符两边的数据进行加减乘除计算，这同一般意义上的算术计算没有差异。 b)逻辑计算符 <br>　　<br>D公式计算符<br>公式计算符将函数连接成为公式。计算分为算术计算符和逻辑计算符。<br>a)算术计算符<br>包括十、一、*、／，它们分别对计算符两边的数据进行加减乘除计算，这同一般意义上的算术计算没有差异。<br>b)逻辑计算符<br>包括&gt;、&lt;、&lt;&gt;、&gt;=、&lt;=、=、AND、OR八种，分别表示大于、小于、不等于、大于等于、小于等于、等于、逻辑与、逻辑或运算，如果条件成立计算结果就等于1，否则等于0。例如：3+4等于7，4&gt;3就等于1。“逻辑与”表示两个条件都成立时结果才成立：“逻辑或”表示两个条件中只要有一个成立结果成立。例如：4&gt;3ANDl2&gt;=4的结果等于1，4&gt;3 0R 3&gt;12的结果等于1。<br>E 线形描述符<br>对于技术指标公式可以在语句加上线形描述符．用来表示如何画该语句描述的指标线。线形描述符包括以下7种。描述符写在语句后分号前，用逗号将它与语句分隔开，例如在上例当中加入一句线形描述符，c：B*0.618，COLORSTICK；该语句在被执行时，会在图中添加彩色柱线，该功能在编制MACD等指标的时候会显出它的用处。<br>a) COLORRED等三个线形描述符还可以自定义颜色，格式为COLOR+“BBGGRR”：BB、GG、RR表示蓝色、绿色和红色的分量，每种颜色的取值范围是00-FF，采用了16进制。例如：MA5：MA(CLOSE，5)，COLOR00FFFF表示纯红色与纯绿色的混合色：COLOR808000表示淡蓝色和淡绿色的混合色。<br>b) LINETHlCK可以允许对线型的粗细进行白定义的描述，格式LINETHICK+(1-9)”；参数的取值范围在1—9之间，“LINETHICK1”表示最细的线，而“LINETHICK9”表示最粗的线；<br>2.4 关于无效数的问题<br>所谓无效数即指没有数据。在某些情况下，一些数据项可能取不到数据，这时返回值为无效数。例如，MA(CLOSE,500)，其含义是该股票最近500天收盘价的均价，如果有些公司上市时间较短没有500天，则其值为无效数。反应在分析图上则该指标线不显示。在TDX分析系统中函数NODRAW代表无效数，可作为常数使用。<br>无效数与任何数作计算，其结果仍为无效数。例如：7*NODRAW得到的结果仍为NODRAW。<br>第3节 公式编写示例<br> 公式示例<br> 指标公式：均线通道<br> 选股公式：均线通道<br> 五彩K线公式：均线通道<br> 交易系统公式：均线通道<br> 颜色参数应用：MACDK<br> 新增函数应用：HORCALC(X)<br> 新增函数应用：BLOCKSETNUM(板块名称)<br>简单公式<br>这里举一些最简单的公式例子，有些只有一条语句且函数简单，较复杂的公式中函数复杂且语句较多。<br>收盘价线<br>这是最简单的公式：<br>CLOSE;<br>均线<br>计算N日内收盘价的算术平均值，它是最常用的指标之一，公式为：<br>MA(CLOSE,５);<br>其中的MA(X,N)表示X的N日平均。<br>涨幅<br>涨幅指今日收盘价相对于昨日收盘价的变动幅度，即（今日收盘价－昨日收盘价）／昨日收盘价*100%，　　昨日收盘价的公式为：REF(CLOSE,1)，因此涨幅的公式：<br>(CLOSE-REF(CLOSE,1))/REF(CLOSE,1);<br>换手率<br>换手率指当期的成交量占流通股本的比例。<br>公式：<br>VOL/CAPITAL;<br>VOL为当期成交量，CAPITAL为流通股本。<br>创新高<br>创新高指当日最高价是最近一段时间的最高价：<br>HIGH=HHV(HIGH,N);<br>其中的HIGH为当期最高价，HHV(X,N)是求N周期内X最高值。因此该公式的含义是当日最高价创Ｎ日新高时返回值为１，否则为０。<br>横盘整理<br>横盘整理指最近一段时期价格在一定幅度之内摆动：<br>(HHV(CLOSE,10)-LLV(CLOSE,10))/CLOSE&lt;0.05;<br>其中的LLV(X,N)是求N周期内X最低值。因此该公式表示10日收盘价振幅振幅在5%以内。<br>区间统计<br><br>★★★<br>通达信公式教程(13)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(13): 例如，要取得2002年2月1日到2002年12月30日间的最低价。思考一下，一段时间的最低价必然是该段时间内每个分析周期的最低价中最小的那个。所以我们要引用的数据是该段时间各分析周期的最低价，而不需要用到开盘价、<br>例如，要取得2002年2月1日到2002年12月30日间的最低价。思考一下，一段时间的最低价必然是该段时间内每个分析周期的最低价中最小的那个。所以我们要引用的数据是该段时间各分析周期的最低价，而不需要用到开盘价、收盘价或最高价；还要将不需要的数据，即区间外的数据设为０。语句为：<br>LL:=IF(YEAR=2002 AND MONTH&gt;=2 AND MONTH&lt;=12,LOW,0);<br>该语句用一个条件函数来判断时间是否处于规定区间，若是则返回最低价，否则返回０。<br>我们再用LLV函数，就可求得该段时间最低的最低价：<br>LLV(LL,N);<br>N为日期参数，N为0，则上式表示：上市以来的最低价。<br>技术指标公式<br>技术指标公式用于绘制技术指标线。以KDJ指标为例，右键点击KDJ，选择“编辑公式”后打开公式算法编辑器，显示出KDJ指标公式的内容。<br>参数名称: 最小值 最大值 缺省值<br>N: 1 10O 9<br>M1: 2 40 3<br>M2: 2 40 3<br>RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;<br>K:SMA(RSV,M1,1)；<br>D:SMA(K,M2,1);<br>J:3*K-2*D<br>该公式绘制K、D、J两条指标线。<br>RSV行是一个中间语句，计算当期收盘价与N天内最低价之差除以N内最高价与最低价之差的比值，再乘以系数100。<br>K线为RSV的M1天移动平均线；<br>D线为线K的M2天移动平均线；<br>J线为K线与J线的差值。<br>条件选股公式条件选股公式<br>条件选股用于选出满足条件的股票，条件选股公式用于显示条件是否满足的语句是一个逻辑表达式，条件满足，表达式的返回值为“1”，表示选中该股，条件不满足，返回值为为“0”，表示未选中。条件选股公式的其他公式必须是中间公式，而且要在逻辑表达式之前。以KDJ指标买入条件选股为例，右键点击“KDJ指标买入条件选股”，选择“编辑公式”后打开公式算法编辑器，显示出公式的内容。<br>用KDJ随机指标作为买入条件是当J向上穿越0坐标线的时候<br>公式写法为：<br>参数名称:最小值 最大值 缺省值<br>N: 1 10O 9<br>M1: 2 40 3<br>M2: 2 40 3<br>RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;<br>K:SMA(RSV,M1,1);<br>D:SMA(K,M2,1);<br>J:3*K-2*D;<br>CROSS(J,0);<br>如果直接引用指标公式，KDJ条件选股公式可以简写为：<br>CROSS("KDJ.J"(N,M1,M2),0);<br>3.2 指标公式：均线通道<br>新建公式“均线通道”（JXTD）<br>1.使用快捷键Ctrl+F打开“公式管理器”。<br>2.点击“新建”按钮，打开“公式编辑器”<br>3.填写公式项<br>“公式名称”---JXTD,<br>“公式描述”---“均线通道”<br>参数 （最小值）（最大值）（缺省值）<br>#N: 1 100 26<br>--------------------------------------------------<br>VAR1:=MA(CLOSE,N);{对“VAR1”赋值}<br>VAR2:=MA(CLOSE,2*N);{对“VAR2”赋值}<br>VAR3:=MA(CLOSE,3*N);{对“VAR3”赋值}<br>VAR4:=MA(CLOSE,4*N);{对“VAR4”赋值}<br>VAR5:=MA((VAR1+VAR2+VAR3+VAR4)/4,5);{一条多条均线的平均线}<br>上轨:VAR5*1.08;{在均线“VAR5”上加上8%的幅度变成“上轨”}<br>下轨:VAR5*0.92; {在均线“VAR5”上减去8%的幅度变成“下轨”}<br>----------------------------------------------------<br>4.指标类型：选“路径型”，还有大势型、超买超卖型、趋势型、能量型等如图<br>5.画线方法：副图、主图叠加、副图叠加线、副图叠加美国线四种；选中“主图叠加型”，副图是K线图下面的区域；<br>6.密码保护：010101<br>7.参数设置：#N：最小值为1，最大值为100，缺省值（默认）为26；<br>8.坐标线位置：在非“主图叠加”中，此编辑框处可写状态；输出线为副图中深红色横线显示，是副图坐标线；<br><br>★★★<br>通达信公式教程(14)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(14): 9.额外Y轴分界：是指标敏感数值输出线，在副图中显示为白色； 10.引入指标公式：在引入原公式的基础上进行编辑； 11.插入函数：左上为函数类别，右上为函数表，下区为函数解释区及用法举例； 12.公式编辑区： 〖{ }<br>　　<br>9.额外Y轴分界：是指标敏感数值输出线，在副图中显示为白色；<br>10.引入指标公式：在引入原公式的基础上进行编辑；<br>11.插入函数：左上为函数类别，右上为函数表，下区为函数解释区及用法举例；<br>12.公式编辑区：<br>〖{ }〗是解释，不输出，为了提示自己和别人，便于看懂公式；<br>〖:=〗赋值符，意为“相当于”；<br>〖:〗输出符，它前面的名称为输出名称，可以在副图中看到，它后面的为公式定义；<br>〖；〗分段符，表示一段完成；<br>〖，〗分节符；<br>〖（）〗括号中为公式体。<br>13.测试公式：测试通过则自动保存；测试不能通过，则在翻译区提示错误所在。<br>14.用法注释：自编公式使用说明。<br>15.在K线图上，直接敲字母键“JXTD”调出自编的公式“均线通道”，查看结果；<br>16.修改公式：左键选中公式线后，点击右键，在弹出的对话框中，选中“修改指标”项，直接调出《公式编辑器》修改公式。如果左键选指标线不便，直接用右键选参数数值，也可调出公式编辑器。<br>17.鼠标动态提示：将鼠标放在函数上，等一会系统自动出现提示框，方便函数学习和应用，如图：<br>3.3 选股公式：均线通道<br>改公式“均线通道”（JXTD）为选股公式“均线通道”<br>1. 〖Ctrl〗+〖F〗打开“公式管理器”；<br>2. 点击“条件选股公式”选项；<br>3. 点击“新建”按钮，打开“条件选股公式编辑器”；<br>4. 点击“引入指标公式”按钮，选最后一项“均线通道”，确定；<br>5.修改输出：公式输出项改为赋值项；即将〖:〗符改为〖:=〗符；<br>6.新建输出项：选股:CLOSE&lt;下轨;{选出收盘价小于下轨的股票}；如图<br>7.测试公式通过；<br>8. 〖Ctrl〗+〖T〗打开条件选股公式“均线通道”，进入公式选股操作程序；<br>3.4 五彩K线公式：均线通道<br>改公式“均线通道”（JXTD）为五彩K线公式“均线通道”<br>1. 〖Ctrl〗+〖F〗打开“公式管理器”；<br>2. 点击“五彩K线公式”选项；<br>3. 点击“新建”按钮，打开“K线指示公式编辑器”；<br>4. 点击“引入指标公式”按钮，选“均线通道”确定；<br><br><br>五彩K线公式<br>公式名：JXTD<br>公式描述：均线通道<br>参数 （最小值）（最大值）（缺省值）<br>#N: 1 100 26<br>--------------------------------------------------<br>VAR1:=MA(CLOSE,N);{对“VAR1”赋值}<br>VAR2:=MA(CLOSE,2*N);{对“VAR2”赋值}<br>VAR3:=MA(CLOSE,3*N);{对“VAR3”赋值}<br>VAR4:=MA(CLOSE,4*N);{对“VAR4”赋值}<br>VAR5:=MA((VAR1+VAR2+VAR3+VAR4)/4,5);{一条多条均线的平均线}<br>上轨:=VAR5*1.08;{在均线“VAR5”上加上8%的幅度变成“上轨”}<br>下轨:=VAR5*0.92; {在均线“VAR5”上减去8%的幅度变成“下轨”}<br>CLOSE&lt;下轨,COLORRED; {小于下轨提示买入红色}<br>CLOSE&gt;上轨,COLORYELLOW; {高于上轨提示卖出黄色}<br>HIGH&gt;上轨*1.06,COLORBLUE;{高于上轨6%提示清仓蓝色}<br>LOW&lt;下轨*0.94, COLORMAGENTA;{低于下轨6%提示加仓洋红色}<br>--------------------------------------------------<br>5.测试通过,退出；<br>6.〖Ctrl〗+〖K〗，打开“五彩K线指示”---“均线通道”；<br>7.查看效果，不满意就修改参数一直到满意为止；<br>3.5 交易系统公式<br>改公式“均线通道”（JXTD）为交易系统公式“均线通道”<br>1. 〖Ctrl〗+〖F〗打开“公式管理器”；<br>2. 点击“交易系统公式”选项；<br>3. 点击“新建”按钮，打开“交易系统公式编辑器”；<br>4. 点击“引入指标公式”按钮，选“均线通道”确定；<br>公式名：JXTD<br>公式描述：均线通道<br>参数 （最小值）（最大值）（缺省值）<br>#N: 1 100 26<br>-------------------------------------------------- <br>-------------------------------------------------- <br><br>★★★<br>通达信公式教程(15)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(15): VAR1:=MA(CLOSE,N);{对“VAR1”赋值} VAR2:=MA(CLOSE,2*N);{对“VAR2”赋值} VAR3:=MA(CLOSE,3*N);{对“VAR3”赋值} VAR4:=MA(CLOSE,4*N);{对“VAR4”赋值} VAR5:=MA((VAR1+VAR2+VAR3+VAR4)/4,5);{一条多条均线的平<br>　　<br>VAR1:=MA(CLOSE,N);{对“VAR1”赋值}<br>VAR2:=MA(CLOSE,2*N);{对“VAR2”赋值}<br>VAR3:=MA(CLOSE,3*N);{对“VAR3”赋值}<br>VAR4:=MA(CLOSE,4*N);{对“VAR4”赋值}<br>VAR5:=MA((VAR1+VAR2+VAR3+VAR4)/4,5);{一条多条均线的平均线}<br>上轨:=VAR5*1.08;{在均线“VAR5”上加上8%的幅度变成“上轨”}<br>下轨:=VAR5*0.92; {在均线“VAR5”上减去8%的幅度变成“下轨”}<br>{多头买入} ENTERLONG:CLOSE&lt;下轨;<br>{多头卖出} EXITLONG:CLOSE&gt;上轨;<br>---------------------------------------------------<br>5.测试通过,退出；<br>6.〖Ctrl〗+〖E〗，打开“五彩K线指示”---“均线通道”；<br>7.查看效果，不满意就修改参数一直到满意为止；<br>8.删除指示：快捷键〖Ctrl〗+〖H〗；鼠标左键选中指示图标，按〖Delete〗，或者点击鼠标右键，在弹出的菜单中选“删除交易系统指示”。<br><br>3.6 颜色参数应用：“MACD”K线<br>公式名称：MACDK<br>简称：“MACD”K线<br>----------------------------<br>DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);<br>DEA:EMA(DIF,MID);<br>MACD:(DIF-DEA)*2,COLORSTICK;<br>D1:=EMA(C,3)-EMA(C,8);<br>D2:=EMA(O,3)-EMA(O,8);<br>D3:=EMA(H,3)-EMA(H,8);<br>D4:=EMA(L,3)-EMA(L,8);<br>DRAWICON(CROSS(D1,DIF) AND DIF&lt;0 ,D4-0.1,10);<br>DRAWICON(cross(diff,d1) and diff&gt;0.1 ,d3+0.1,2);<br>STICKLINE(D1&gt;=D2,D1,D2,8,0),COLOR0055AA;<br>STICKLINE(D1&lt;=D2,D1,D2,8,0),COLOR006600;<br>STICKLINE(D1&gt;=D2,D1,D2,5,0),COLOR0077CC;<br>STICKLINE(D1&gt;=D2,D1,D2,3,0),COLOR0099DD;<br>STICKLINE(D1&gt;=D2,D3,D4,0,0),COLOR00BBFF;<br>STICKLINE(D1&lt;=D2,D1,D2,5,0),COLOR009900;<br>STICKLINE(D1&lt;=D2,D1,D2,3,0),COLOR00BB00;<br>STICKLINE(D1&lt;=D2,D3,D4,0,0),COLOR00EE00;<br>------------------------------<br><br>3.7 新增函数应用HORCALC(X)<br>函数： HORCALC(X)<br>说明： 数据项:100-HIGH,101-OPEN,102-LOW,103-CLOSE,104-VOL,105-涨幅<br>计算方式:0-累加,1-排名次<br>权重:0-总股本,1-流通股本,2-等同权重,3-流通市值<br>用法： HORCALC(板块名称,数据项,计算方式,权重)<br>例如： HORCALC('自选股',103,0,1);以自选股板块股票的总股本为权重，以收盘价为数源进行累加。<br>公式名称：ｚｄｋｘ<br>公式描述：自定指数K线<br>参数：（最小值）（最大值）（缺省值）<br>#n: 1 100 10<br>---------------<br>高:=HORCALC('湖北板块',100,0,1);<br>开:=HORCALC('湖北板块',101,0,1);<br>低:=HORCALC('湖北板块',102,0,1);<br>收:=HORCALC('湖北板块',103,0,1);<br>自定K线: DRAWKLINE(高,开,低,收);<br>MA(自定K线,N);<br>---------------<br><br>公式说明：<br>１．用于制作自定义指数、自设板块指数K线。<br>２．先制作自定义板块，“Ｃｔｒｌ＋ｚ”，填写好板块名称和简称（数字）；<br>３．“板块名称”须用单引号，如'自选股'、'庄股'；<br>４．起始位为１０００点（下载到本地数据）；<br>５．板块内不要含有太多的股票数量，以免影响速度；<br>3.8 新增函数应用BLOCKSETNUM(板块名称)<br>函数： BLOCKSETNUM(板块名称)<br>说明： 统计板块中股票数量<br>用法： BLOCKSETNUM(板块名称)<br>注意：板块名称要用单引号<br>例如： BLOCKSETNUM('ST板块')，返回“ST板块”数量。<br>公式名称：STPM<br>公式描述：个股在st板块内排名<br>--------------<br>板块股数量:BLOCKSETNUM('ST板块'),NODRAW;<br>ST涨幅排名:HORCALC('ST板块',105,1,2);<br><br>说明：<br>NODRAW是不输出线型只输出数值命令，用于多指标不兼容坐标； <br><br>★★★<br>通达信公式教程(16)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(16): 公式证伪专业操盘手的核心机密法则 法则一：买股票前先进行大势研判 1、大盘是否处于上升周期的初期——是——选股买入。 2、宏观经济政策、舆论导向有利于那一个板块，该板块的代表性股票是哪几个，成交量是否明显<br>　　<br>公式证伪专业操盘手的核心机密法则<br>法则一：买股票前先进行大势研判<br>　　1、大盘是否处于上升周期的初期——是——选股买入。<br>　　2、宏观经济政策、舆论导向有利于那一个板块，该板块的代表性股票是哪几个，成交量是否明显大于其它板块。确定5-10个目标个股。<br>　　3、收集目标个股的全部资料，包括公司地域、流通盘、经营动向、年报、中报，股东大会（董事会）公告、市场评论以及其它相关报道。剔除流通盘太大，股性呆滞或经营中出现重大问题暂时又无重组希望的品种。<br>　　法则二：中线地量法则<br>　　1、选择（10，20，30）MA经六个月稳定向上之个股，其间大盘下跌均表现抗跌，一般只短暂跌破30MA。<br>　　2、OBV稳定向上不断创出新高。<br>　　3、在大盘见底时地量出现，以3000万流通盘日成交10万股为标准。<br>　　4、在地量出现当日收盘前10分钟逢低分批介入。<br>　　5、短线以5%-10%为获利出局点。<br>　　6、中线以50%为出货点。<br>　　7、以10MA为止损点。<br>　　法则三：短线天量法则<br>　　1、选择近日底部放出天量之个股，日换手率连续大于5%-10%，跟踪观察。<br>　　2、（5，10，20）MA出现多头排列。<br>　　3、60分钟MACD高位死叉后缩量回调，15分钟OBV稳定上升，股价在20MA之上走稳。<br>　　4、在60分钟MACD再度金叉的第二个小时逢低分批进场。<br>　　5、短线获利5%以上逢急拉派发。<br>　　6、一旦大盘突变立即保本出局，以利再战。<br>　　法则四：强势新股法则<br>　　1、选择基本面良好、具成长性、流通盘6000万以下新股观察。<br>　　2、上市首日换手70%以上。或当日大盘暴跌，次日跌势减缓立即收较大阳线收复首日阴线三分之二以上。<br>　　3、创新高买入或选择天量法则买点介入。<br>　　4、获利5%-10%出局。<br>　　5、止损为设为保本价。<br>法则五：成交量法则<br>　　1、成交量有助于研判趋势何时反转：高位放量长阴线是顶部的迹象，而极度萎缩的成交量说明抛压已经消失，往往是底部的信号。口诀：价稳量缩才是底。<br>　　2、个股成交量持续超过5%，是主力活跃其中的明显标志。短线成交量大，股价具有良好弹性，可寻求短线交易机会。<br>　　3、个股经放量拉升、横盘整理后无量上升，是主力筹码高度集中，控盘拉升的标志，此时成交极其稀少，是中线买入良机。<br>　　4、如遇突发性高位巨量长阴线，情况不明，要立即出局，以防重大利空导致崩溃性下跌。例如，0508琼民源，停牌前一天放量下跌，次日遭停牌，长达三年。<br>　　法则六：不买下降通道的股票<br>　　1、猜测下降通道股票的底部是危险的，因为他可能根本没有底。<br>　　2、存在的就是合理的，下跌的股票一定有下跌的理由，不要去碰它，尽管可能有很多人觉得它已经太便宜了。<br>　　法则七：要敢于买入创新高的股票<br>　　1、95%的人不敢买创新高的股票，这是他们总抓不住大黑马的原因，龙头股然是率先创出新高的品种。<br>　　2、当某只股票创新高时，其中必含重大意义──该股票一定有一些事情发生了改变，不论有多少人宣称，基本面并未改变，而且也没有理由涨到如此高位。这种故事几乎每天都在上演，人们还是无法克服恐惧。<br>　　法则八：勇于止损<br>　　1、首先要明白没有谁不曾亏钱，没有睡是百发百中，因为要知道市场上有太多不确定的因素。<br>　　2、一旦出现与预想不同的情况，宁可错失一次机会也要果断止损出局，保持资金的自由，耐心等待下一个交易机会。<br>　　3、不设止损不买股。<br>　　法则九：分批买入一次买出<br>　　1、确定目标股票后结合盘口走势，试探性买入，趋势确立后再逐渐加码，不可一次性满仓买入，避免因分析不全面导致太大损失。<br>　　2、到达目标位则一次性了结，不可拖泥带水，贻误下一次交易机会。<br>kdj本质kdj 祥解 kdj 公式体如下： <br><br><br>★★★<br>通达信公式教程(17)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(17): RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100; {(收盘价-N日内最低价的最低值)/(N日内最高价的最高值-N日内最低价的最低值)*100} K:SMA(RSV,M1,1);{RSV的M1日[1日权重]累积平均} D:SMA(K,M2,1);{K的M2日[<br>　　<br>RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;<br>{(收盘价-N日内最低价的最低值)/(N日内最高价的最高值-N日内最低价的最低值)*100}<br>K:SMA(RSV,M1,1);{RSV的M1日[1日权重]累积平均}<br>D:SMA(K,M2,1);{K的M2日[1日权重]累积平均}<br>J:3*K-2*D;{3*K-2*D}<br>解释：<br>1.第一行代码：现价减区间最低价，然后除以9天区间涨跌幅，得出现价在区间涨跌幅中间的比值%；就是说现在价格处在9天最高价与最低价的什么位置%；可见最小是0，最大是100；<br>2.第二行代码：k是RSV的3日均线；<br>3.第三行代码：D是k 的3日均线；<br>4.第四行代码：J 是K、D两条均线的差值；为了看清公式的含义，二三四行代码是第一行代码的加工，我们可以直接删除二三四行代码，留下第一行并输出；<br>操作如下：新建公式kdjj RSV: (CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;<br>看到的是现价处在9天涨跌幅中的比例%；为了更清楚看清本质，将公式类型改为主图叠加型；结果很直观看出kdj公式的含义，<br>操作如下：新建公式：kdjjj 画线类型 ：主图叠加型 RSV: LLV(LOW,N); RSS:HHV(HIGH,N); [说明]：kdj本质是区间高低价；<br>凡是k现与指标线接触的日期 就是rsv值为0或者100的日期，也是kdj的k值最高或最低的日期；<br>反思：筹码论反思：筹码论-量堆积图<br>量大量小表明市场人士争议的多少，多空战争规模的大小。<br>以量堆集图预测股价的理论，远不如轮廓理论有用。还没找到量堆积图有什么用的证据之前，我们不能向股民作出推介和傻论！！那位大虾提点证据我看看！<br>股价的运动与量的相关性是有，但是，仅限于价量比小于量价比的区间：JLB&lt;LJB，其它时候，看不到价量相关性。你能用1/8的相关区间来推理7/8的非相关区间的价量关系吗？<br>技术分析派的古老理念：“股市价格以外的因素可以不考虑”。关于筹码其实质就是成交量的纵向堆积。<br>如：成本均线(mcst)<br>成本均线: dma(amo/vol,hsl/100);<br>你能看出过一二三吗？<br>神仙能看出什么道道？<br>还是软件商人的“不误证业”造成的？<br>逆市选股法逆市选股法 (一)<br><br>逆市缩量平台<br>　　众所周知,大盘下跌中能逆势企稳甚至上升的个股,要么是主力仍驻其中,要么是主力趁<br>机吸货。这两个基本的判断得出一个结论:主力在场。故此,关注逆市股可谓是漫漫熊途中寻<br>求避风港的最佳策略。这其实正是股谚“跌市重质““该跌不跌就看涨“的精华所在。本法正<br>是从此原理出发,通过对逆市形态的捕捉,进而争取在与主力博弈中处于主动位置而最终获<br>利。<br>　　就形态而言,我们要介绍的第一个形态是在大盘下跌中,庄股悄然构筑出的逆市缩量平<br>台。正因为其安全性较高而成为我们的首要关注。其特征主要有:<br>　　一、在大跌市仍能缩量企稳构筑平台,逆市时间越长潜力越大。其中特别要强调平台要缩<br>量,这是该形态中最关键的一点。因为在大盘下跌、压力区抛压等多重压力之下该股仍能够企<br>稳,并且缩量,这已经很清楚地说明了两点:一是有主力在场,所以不跟随大盘下跌；二是主力<br>一定达到至少相对控盘程度,才能在缩量的情况下保持股价不跌。同时,主力既然控盘,其伺机<br>拉升的意愿势必强烈,相对而言,投资者处于主动地位。<br>　　二、选择价位在主力成本区或相对底部的股票较安全。对投资者而言,可以首先淘汰掉主<br>力高度控盘且股价在相对高位的逆市股票,除此之外介入剩下的逆市股风险不是特别大,这在<br>调整市中有利于自我保护。其中的主力成本区一般可用成交密集区进行替代分析。<br>　　三、此类股一旦在大盘企稳时开始突破,其拉升时往往逐步连续性放量。因为此前的平台<br>缩量其实是成交量的累积阶段,从成交量的转换原理看,后面阶段就有个成交量的释放期,这 <br><br><br>★★★<br>通达信公式教程(18)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(18): 恰好与拉升期需要放量的要求相辅相成。另外,正由于成交量集中持续地放大,造成股价运行 的惯性较大,像刹车后失去动力但车仍会继续前行一样,股价在成交量缩小时仍会惯性上行, 形成成交量的顶背弛,但这时候往往也就是<br>　　<br>恰好与拉升期需要放量的要求相辅相成。另外,正由于成交量集中持续地放大,造成股价运行<br>的惯性较大,像刹车后失去动力但车仍会继续前行一样,股价在成交量缩小时仍会惯性上行,<br>形成成交量的顶背弛,但这时候往往也就是股价将见顶的信号,应择机抛出。<br>　　四、在操作策略上,可等待出现连续放量突破时及时买入。这时虽然不是介入的最低点,<br>但往往是最安全点。<br>逆市选股法(二)<br><br>逆市温和放量<br>一、形态特征<br>　　此类逆市股的形态特征主要有:<br>　　1、逆市小幅拉升,呈现轨道型,且累计升幅不大,在10%左右；<br>　　2、成交量温和放大,但换手率不大,一般最高在5%左右；<br>　　3、此类逆市股往往是短线品种,在突破时一般放大成交量,连续拉长阳。<br>二、形成原因<br>　　这类逆市股形成的原因主要有:<br>　　1、主力逆市拉升收集筹码。在调整市中,由于市场恐慌因素往往造成散户非理智地抛售<br>股票,这种恐慌气氛为主力收集筹码提供了较好时机。而主力积极收集筹码势必会造成成交量<br>的温和放大。当然,成交量总体水平也不能过于显眼,以免引起市场过早关注而暴露行踪。<br>　　2、主力缩量洗盘完毕,刚刚准备进入拉升,但因看盘失误或者其他不可测因素大盘走坏,<br>造成拉升计划短期受阻,在资金实力承受范围内,主力只能暂时护盘。另外,由于其放量启动趋<br>势基本确立,故此为维持市场人气,短期主力仍需要制造成交活跃以维持趋势。<br>　　此类逆市股一旦正式启动,一般以连续拉升为主。因为主力底部护盘得力,逆市放量表现<br>又说明其信心充足,故此筹码到位后一旦大盘出现企稳反弹迹象,其必将充分利用市场时机拉<br>升。在走势上往往表现为:启动(初级阶段段)多以中阳上升制造突破,且少回调、少反复；否<br>则,一旦出现滞涨则很可能是主力筹码运作出问题,投资者应遵循“该涨不涨------看跌“操<br>作策略。<br>三、操作策略<br>　　操作上,投资者可选择以下时机介入:<br>　　1、在结束缩量平台调整后,初步温和放量拉升即碰到大盘打压、但又能盘稳者,可介入。<br>此类个股往往也是大盘反弹中的龙头板块或个股所在。特别在短期大盘暴跌当日,选择经过平<br>台缩量后再放量开始突破拉升的进攻型。<br>　　2、温和放量拉升者一旦出现中阳以上大成交量,并突破盘升轨道,可大胆介入,其强烈的<br>惯性作用往往会带来短线的丰厚利润。<br>逆市选股法(三)<br><br>上升三角形<br><br>一、基本情况<br>　　上升三角形是所有整理形态中最强势的中继技术形态。若在下跌市中出现此图形,强势图<br>形与逆市法的结合往往是投资者的最佳选择。<br>　　从形态结构看,上升三角形的高位区基本在同一水平区域,股价反复地冲击这一压力区,<br>这表明市场积极攻击该区域以消化压力,主力收集筹码做多意愿极为强烈。另一方面,在形态<br>的多次回调中,最明显的特征是低位逐步上升,究其原因,源于投资者对其看好而在回调中积<br>极吸纳,同时也反映出主力惜售而不愿打压过深以免丢失筹码的心理。由此可见,上升三角形<br>具备进攻时积极、回守时惜售的市场特征,自然成为最强势的上升中途整理形态。<br>　　值得注意的是,若该形态是在大盘的下跌过程中逐步形成的,根据逆市选股本质在于发掘<br>主力动向的出发点,由于该股有主力在场而值得关注,并且由于主力做多意愿相当强烈,对投<br>资者而言是首选品种。有鉴于此,逆市上升三角形堪称为逆市选股法<br><br>二、特征分析<br>　　由于该形态反映了主力逆市收集的迫切心态,其在成交变化上的特征尤为关键:<br>　　1、形态形成一般以逆市温和放量上升为开端,这是主力初步入场阶段。由于需要激活股 <br><br>★★★<br>通达信公式教程(19)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(19): 性,往往造成成交量快速放大,一般也是该形态中最大成交量的阶段。 2、之后在多次上升冲击压力位及回调洗盘时,呈现出良好的价升量增、价跌量缩的价量 配合现象,反映筹码良性分配。 3、形态末段明显缩量,震幅减?Ｕ馐<br>　　<br>性,往往造成成交量快速放大,一般也是该形态中最大成交量的阶段。<br>　　2、之后在多次上升冲击压力位及回调洗盘时,呈现出良好的价升量增、价跌量缩的价量<br>配合现象,反映筹码良性分配。<br>　　3、形态末段明显缩量,震幅减小。这是形态成交特征中最关键的特征。此时说明主力基<br>本控制盘口,筹码锁定良好。<br>　　4、突破拉升阶段强调持续放大交易量。由于上升三角形拉升往往是连续大幅飙升,投资<br>者甚至可以在突破放量信号出现后追高介入。<br>　　5、天量非天价。一般拉升期出现价量背驰才是顶部出现的信号。<br><br>三、注意事项<br>　　1、由于该形态本身的强势特征,加之缩量逆市对投资者而言是最安全形态,故该形态构筑<br>过程中放量与否不太重要,缩量有时反而说明控盘程度高。<br>　　2、此形态主力做多意愿强烈,对筹码锁定严格,构筑过程中价量配合必须良好。<br>　　3、形态构筑中不必每个阶段都逆市,关键在于整体形态能否在逆市中完全形成。有时在<br>下跌末段保持随市打压(但总体形态仍维持完好)的走势,说明主力踩准市场节奏运作筹码,后<br>市潜力更大。<br>支撑与阻力：<br>初学股票寻找压力、支撑是一大难题，选取合适的压力位与支撑位是一项基本功，它是短线选股的基础<br>1.支撑与阻力：筹码集中已形成支撑位、阻力位。原理是：价格回到交易集中的区间速度会减慢。<br>2“横有多长，竖有多高”的空间支撑、压力柱<br>3.“整数支撑与压力” “趋势支撑与压力” “30％”支撑与压力(空间压力与支撑) 麦克压力与支撑（指标压力与支撑）箱体压力于支撑（空间压力支撑）<br>4.指标压力与支撑：WR,BOLL,MA,RSI<br>5.心理压力与支撑位：市场人士获得共识到“心理关口”。波动习惯的压力与支撑 “天无三日晴”<br>6.平台压力与支撑“平台支撑、压力”<br>7.K线形态压力支撑 ：底部支撑、W底、双底、三角形底；平台支撑位；<br>技术分析方法的分类<br>　　在价、量历史资料基础上进行的统计、数学计算、绘制图表方法是技术分析方法的主要手段。从这个意义上讲，技术分析方法可以有多种。一般说来，可以将技术分析方法分为如下五类：指标类、切线类、形态类、K线类、波浪类。<br>　<br>　　（1）指标类。<br>　　指标类要考虑市场行为的各个方面，建立一个数学模型，给出数学上的计算公式，得到一个体现股票市场的某个方面内在实质的数字。这个数字叫指标值，指标值的具体数值和相互间关系，直接反映股市所处的状态，为我们的操作行为提供指导方向。指标反映的东西大多无法从行情报表中直接看到。<br>　　（2）切线类。<br>　　切线类是按一定方法和原则在由股票价格的数据所绘制的图表中画出一些直线，然后根据这些直线的情况推测股票价格的未来趋势。这些直线就叫切线。切线的作用主要是起支撑和压力的作用。支撑线和压力线的往后延伸位置对价格趋势起一定的制约作用。一般说来,股票价格从下向上抬升的过程中,一触及压力线,甚至没有触及压力线,就会调头向下;同样,股价下跌过程中,在支撑线附近就会向上。另外,如果触及切线没有转向,而是继续向上或向下,这就叫突破。突破之后,这条切线仍然有实际作用,只是名称和作用变了,原来的支撑线变成了压力线,原来的压力线变成了支撑线。<br>　　（3）形态类。<br>　　形态类是根据价格图表中过去一段时间走过的轨迹形态预测股票价格未来趋势的方法。技术分析的第一条假设告诉我们,市场行为包括一切信息。价格走过的形态是市场行为的重要部分,是股票市场对各种信息作用之后的具体表现,用价格图的轨迹或者说是形态来推测股票价格的将来是很有道理的。从价格轨迹的形态中我们可以推测出股票市场处在一个什么样的大环境之中,由此对我们今后的行为给予一定的指导。著名的形态有M头、W底、头肩顶(底)等十几种。 <br><br>★★★<br>通达信公式教程(20)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(20): （4）K线类。 K线类的研究手法是侧重若干天K线的组合情况，推测股票市场多空双方力量的对比，进而判断股票市场多空双方谁占优势，是暂时的，还是决定性的。K线图是进行各种技术分析的最重要的图表。 （5）波浪类。 <br>　　<br>　　（4）K线类。<br>K线类的研究手法是侧重若干天K线的组合情况，推测股票市场多空双方力量的对比，进而判断股票市场多空双方谁占优势，是暂时的，还是决定性的。K线图是进行各种技术分析的最重要的图表。<br>　　（5）波浪类。<br>　　波浪理论起源于1978年美国人查尔斯·J·柯林斯发表的专著《波浪理论》。<br>　　波浪理论是由美国人艾略特于1934年建立的一套有关股票价格波动和投资技术的理论。<br>　　艾略特最初发明波浪理论是受到股价上涨下跌现象不断重复的启发，力图找出其上升和下降的规律。社会经济的大环境有一个经济周期，股价的上涨和下跌也应该遵循这一周期发展的规律。不过股价波动的周期规律同经济发展的循环周期是不一样的，要复杂得多。<br>　　艾略特最初的波浪理论是以周期为基础的。他把周期分成时间长短不同的各种周期，并指出，在一个大周期之中可能存在一些小周期，而小的周期又可以再细分成更小的周期。每个周期无论时间长短，都是以一种模式进行。这个模式就是一个周期由8个过程组成，即每个周期都是由上升（或下降）的5个过程和下降（或上升）的3个过程组成。这8个过程完结以后，我们才能说这个周期已经结束，将进入另一个周期。新的周期仍然遵循上述的模式。以上是艾略特波浪理论的最核心的内容，也是艾略特作为波浪理论奠基人所作出的最为突出的贡献。<br>　　艾略特波浪理论中的大部分理论是与道氏理论相吻合的。不过艾略特不仅找到了这些移动，而且还找到了这些移动发生的时间和位置，这是波浪理论较之于道氏理论更为优越的地方。道氏理论必须等到新的趋势确立以后才能发出买卖行动的信号，波浪理论可以明确地知道目前是处在上升（或下降）的尽头，或是处在上升（或下降）的中途，可以更明确地指导操作。<br>(6).广量指标<br>上涨下跌家数的统计分析。<br>抛物线转向操作系统（SAR）[教学]抛物线转向操作系统（SAR）<br>经常面临这样一个严峻的课题，股指（股价）振幅惊人，究竟何时持股，何时持币？价格和时间并重的分析工具SAR将是一个好帮手。　<br>抛物线转向系统不仅利用价位变动的动能，而且运用了时间变动性质来调整价位上设定的停损位置。SAR之递减或递增与实际价格之升跌幅度及时间长短有密切关系，可适应不同形态股价之波动特性。<br>SAR的实质就是多空立场的转变过程。当股价在停损点之上，我们将手中的股票保留，也就是我们所持的态度是看多，是多方。但股价跌破停损点之后，我们的行动是将手中股票抛出，也就是说我们所持的态度是看空，是空方。由多方变成空方完全是由股价是破停损点还是不破停损点而定。停损点成了多空转变的分界线。这也是SAR被成为停损转向的指标的原因。<br>第一，随着股价的上升每一天的停损点也应该相应地抬高，每天都根据情况的不同，计算出一个新的停损点。<br>第二，停损点被跌破之后，股价应该继续下跌。SAR就是帮助我们发现趋势转向，并且利用趋势获利的技术分析工具，它能帮助我们更好的把握好波段行情。<br>SAR的操作原则由于非常简单，故深受市场的青睐。买卖的进场实际是在价位穿过SAR时，也就是向下跌破SAR便卖出，向上越过SAR就买进。就拿1995年初上市的“西藏明珠”来说，短线客兢兢业业，只不过喝了点汤，而聪明人则依据宝塔线作小波段（6元显示明显买进信号，13元显示卖出信号），令人羡慕不已。<br>实证案例：96.7.24和96.8.12沪市构筑了典型的894点“双尊头”。联想到1995年的793点“双尊头”所形成的强大杀伤力，许多人士认为894就是沪市1996年的“顶”了。在这种思路灌输下，股指从894点直泻至750区域；正当市场不知所措时，96.9.20的抛物线转向操作系统却强调转折点并发出了买进信号，并一直维持至96.12的1071点，有力地驳斥了894点的“顶部论”，为“趋势理论”作出贡献。 <br><br>★★★<br>通达信公式教程(21)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(21): SAR操作要诀（推论）：经常交替出现讯号，说明大盘正处于盘局中，换句话说，可以大胆低吸高抛；一旦出现陡峭的上升（下跌）趋势，可一路持有（立即止损）。 实证案例：“渤海化工”上市首日以3.12元开盘，其后一路<br>　　<br>SAR操作要诀（推论）：经常交替出现讯号，说明大盘正处于盘局中，换句话说，可以大胆低吸高抛；一旦出现陡峭的上升（下跌）趋势，可一路持有（立即止损）。<br>实证案例：“渤海化工”上市首日以3.12元开盘，其后一路上冲，最高曾至8.30元作为带有H股的新股炒，市场定位有不确定因素，但SAR明确显示；从3.12～6.8元，SAR一路托住股价呈60度上升，是多实控制局面的持有信号。同理，95.10.13“渤海化工”的收盘价为6.75元，似乎还看出危险，但SAR已发出明显的空头转向信号，其标志的45度下，表明空头已牢牢控制局面，不根据SAR的指示而急于补仓，显然是不理智的。结果，这一跌势直至3.80元，SAR才开始发出多头向上信号。<br>实践证明：<br>第一，长期使用SAR指标可以输小赚大，不太可能一次就惨遭套牢。<br>第二，SAR是所有指标中买卖较为明确的，易于配合操作策略的指标，尤其适合强势股，故把它比做明镜高悬并不为过。<br>股价突破了SAR就是行动的信号。向下突破卖出，向上突破买入，这是所有技术指标中叙述起来最为简单的之一。不过，在实际应用时，应该注意以下几点。<br>1. 不一定非要到了股价突破了SAR才采取行动，可以提前。<br>2. 应用SAR最为重要的是明确当前是处于什么大环境。是上升还是下降，在股价为盘整局面时，SAR是不能使用的。<br>3. SAR是选势的指标，在具体选点时，配合摆数指标使用，就能买卖个更好的价钱。<br>布林指标参数设置布林指标的参数设置<br>一般的技术分析软件往往把指标参数默认值设为２０。应该说以２０为参数所设定而成的ＢＯＬＬ指标，在多数情况下，可以兼顾大多数股票价格的走势，具有＂万金油＂的作用。但特点不突出，对于价格趋势的运行不能发出最为准确的信号，而笔者通过实战发现，参数２５却是一个理想的选择。<br>参数２５无论对于指数走势还是股票价格走势都非常适合，尤其是在一些大的波动过程中，以参数２５所设置而成的日Ｋ线ＢＯＬＬ指标能够为我们提供重要见顶或见底的信号。我们先来看一下上证综指的情况，２０００年１１月２３日指数上冲到２１２６点的最高点并形成小幅冲高回落之后，开始进入阶段性的横盘整理，此时以参数２５设置而成的ＢＯＬＬ指标波带开口收窄。在２００１年１月初，指数开始重新出现上升行情，与此相应的是ＢＯＬＬ指标并未出现开口放大。<br>尽管指数连续两次创出了２１３２点的历史新高，但根据指标背离的原则，应当认为大盘创出新高是无力的，也是无效的。非常值得注意的是，当今年１月１１日大盘再次创出２１３２点的新高时，走势正是受到了ＢＯＬＬ指标ＭＢ线的阻力，并迫使指数出现了下跌，同时指标开口出现放大，阶段性的下跌行情正式确立。而在２００１年２月２２日，指标在下跌到１８９３点后出现了止跌企稳，实际上从ＢＯＬＬ指标的角度来看，指数正是受到了其下轨ＤＯＷＮ线的支撑，从而得以出现止跌回升。<br>接下来再看一下凤凰股份（６００６７９）的例子：该股是２００１年涌现出的一只大牛股，这只股票行情爆发的时间是在２０００年１２月。当行情爆发时，原本极窄的ＢＯＬＬ指标波带开口突然明显放大，此时虽然股价形成了强力走高，指标出现了一定的滞后性，但在此后ＢＯＬＬ指标的开口继续放大，验证了价格运行趋势上升的可靠性（该股股价在形成第一波冲高之后略有回落，但指标开口并未缩小）。而在７月１３日，凤凰股份股价形成明显的冲高回落，股价所受到的压制正是来自已经形成回落的ＢＯＬＬ指标ＵＰ线。<br>最后，我们对日线ＢＯＬＬ指标的参数设置技巧和应用原则进行如下总结：１、在价格的日Ｋ线ＢＯＬＬ指标参数设置中，参数设得越大，越能反映价格的中长期走势，参数越小，越能反映价格的中短期走势。<br>２、对指数和个股而言，一般宜将参数值设大一些，参数２５是一个已知的最好的值，但弱势股除外。 <br><br>★★★<br>通达信公式教程(22)时间:2010-06-12 16:11来源:网摘作者:佚名<br>通达信公式教程(22): ３、重新按上述参数值设置而成的ＢＯＬＬ指标，更强调背离现象。当价格创出新高而指标波带开口变窄，应当保持警惕。同理，当价格创出新低而波带开口变窄，应当予以注意，此时往往预示着价格即将见底。 老师向您来求<br>　　<br>３、重新按上述参数值设置而成的ＢＯＬＬ指标，更强调背离现象。当价格创出新高而指标波带开口变窄，应当保持警惕。同理，当价格创出新低而波带开口变窄，应当予以注意，此时往往预示着价格即将见底。<br>老师向您来求教来了,您看下图我做了一个副图公式,想把买卖点做在主图上显示出来结果就成这样了,哪里需要改正啊!请老师不吝赐教.先谢谢了.<br>解答：<br>1，把不想显示的线性的语句变成赋值句。<br>2，在句子后面加上只显示指标数值不画线的函数即可！<br><br>哪个是只显示指标数值不画线的函数<br>净是些指标函数/行情函数等.<br>请您帮我看看.<br>VAR1:=(2*CLOSE+HIGH+LOW)/4;<br>VAR2:=EXPMA(EXPMA(EXPMA(VAR1,4),4),4);<br>J: (VAR2-REF(VAR2,1))/REF(VAR2,1)*100;<br>D: MA(J,3);<br>K: MA(J,1);<br>DRAWTEXT(J&lt;0 AND REF(J,2)&gt;REF(J,1) AND REF(J,1)&lt;J,LOW,'见血封喉'),COLORFF9900;<br>问：<br>1，把不想显示的线性的语句变成赋值句。<br>2，在句子后面加上只显示指标数值不画线的函数即可！<br>答：<br>1，在K,D,J参数输出字符:后面加一个=等于号，作用是不输出数值和线性。<br>VAR1:=(2*CLOSE+HIGH+LOW)/4;<br>VAR2:=EXPMA(EXPMA(EXPMA(VAR1,4),4),4);<br>J: =(VAR2-REF(VAR2,1))/REF(VAR2,1)*100;<br>D:= MA(J,3);<br>K: =MA(J,1);<br>DRAWTEXT(J&lt;0 AND REF(J,2)&gt;REF(J,1) AND REF(J,1)&lt;J,LOW,'见血封喉'),COLORFF9900;<br>2，在句子后面加上只显示指标数值不画线的函数即可！函数 NODRAW<br>VAR1:=(2*CLOSE+HIGH+LOW)/4;<br>VAR2:=EXPMA(EXPMA(EXPMA(VAR1,4),4),4);<br>J:(VAR2-REF(VAR2,1))/REF(VAR2,1)*100,NODRAW;<br>D:MA(J,3),NODRAW;<br>K:MA(J,1),NODRAW;<br>DRAWTEXT(J&lt;0 AND REF(J,2)&gt;REF(J,1) AND REF(J,1)&lt;J,LOW,'见血封喉'),COLORFF9900;<br>
<hr>
===========
<hr>
通达信指标函数说明大全<br>一　、行情函数<br>&nbsp; &nbsp;&nbsp; &nbsp;HIGH 最高价<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期最高价。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： HIGH<br>&nbsp; &nbsp;&nbsp; &nbsp;H 最高价<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期最高价。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： H<br>&nbsp; &nbsp;&nbsp; &nbsp;LOW 最低价<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期最低价。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： LOW<br>&nbsp; &nbsp;&nbsp; &nbsp;L 最低价<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期最低价。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： L<br>&nbsp; &nbsp;&nbsp; &nbsp;CLOSE 收盘价<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期收盘价。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： CLOSE<br>&nbsp; &nbsp;&nbsp; &nbsp;C 收盘价<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期收盘价。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： C<br>&nbsp; &nbsp;&nbsp; &nbsp;VOL 成交量<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期成交量。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： VOL<br>&nbsp; &nbsp;&nbsp; &nbsp;V 成交量<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期成交量。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： V<br>&nbsp; &nbsp;&nbsp; &nbsp;OPEN 开盘价<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期开盘价。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： OPEN<br>&nbsp; &nbsp;&nbsp; &nbsp;O： 开盘价<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期开盘价。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： O<br>&nbsp; &nbsp;&nbsp; &nbsp;ADVANCE 上涨家数<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期上涨家数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： ADVANCE　(本函数仅对大盘有效)<br>&nbsp; &nbsp;&nbsp; &nbsp;DECLINE 下跌家数<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期下跌家数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： DECLINE　(本函数仅对大盘有效)<br>&nbsp; &nbsp;&nbsp; &nbsp;AMOUNT 成交额<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该周期成交额。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： AMOUNT<br>&nbsp; &nbsp;&nbsp; &nbsp;ASKPRICE 委卖价<br>&nbsp; &nbsp;&nbsp; &nbsp;返回委卖1--委卖3价格。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： ASKPRICE(N)　N取1—3。<br>&nbsp; &nbsp;&nbsp; &nbsp;(本函数仅个股在分笔成交分析周期有效)<br>&nbsp; &nbsp;&nbsp; &nbsp;ASKVOL 委卖量<br>&nbsp; &nbsp;&nbsp; &nbsp;返回委卖1--委卖3量。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： ASKVOL(N)　N取1—3。<br>&nbsp; &nbsp;&nbsp; &nbsp;(本函数仅个股在分笔成交分析周期有效)<br>&nbsp; &nbsp;&nbsp; &nbsp;BIDPRICE 委买价<br>&nbsp; &nbsp;&nbsp; &nbsp;返回委买1--委买3价格。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： BIDPRICE(N)　N取1—3。<br>&nbsp; &nbsp;&nbsp; &nbsp;(本函数仅个股在分笔成交分析周期有效)<br>&nbsp; &nbsp;&nbsp; &nbsp;BIDVOL 委买量<br>&nbsp; &nbsp;&nbsp; &nbsp;返回委买1--委买3量。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： BIDVOL(N)　N取1—3。<br>&nbsp; &nbsp;&nbsp; &nbsp;(本函数仅个股在分笔成交分析周期有效)<br>&nbsp; &nbsp;&nbsp; &nbsp;BUYVOL 主动性买盘<br>&nbsp; &nbsp;&nbsp; &nbsp;返回主动性买单量。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　BUYVOL　当本笔成交为主动性买盘时，其数值等于成交量，否则为0。<br>&nbsp; &nbsp;&nbsp; &nbsp;(本函数仅个股在分笔成交分析周期有效)<br>&nbsp; &nbsp;&nbsp; &nbsp;SELLVOL 主动性卖盘<br>&nbsp; &nbsp;&nbsp; &nbsp;返回主动性卖单量。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　SELLVOL　当本笔成交为主动性卖盘时，其数值等于成交量，否则为0。<br>&nbsp; &nbsp;&nbsp; &nbsp;(本函数仅个股在分笔成交分析周期有效)<br>&nbsp; &nbsp;&nbsp; &nbsp;ISBUYORDER 主动性买单<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该成交是否为主动性买单。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： ISBUYORDER　当本笔成交为主动性买盘时，返回1，否则为0。<br>&nbsp; &nbsp;&nbsp; &nbsp;(本函数仅个股在分笔成交分析周期有效)<br>&nbsp; &nbsp;&nbsp; &nbsp;ISSELLORDER 主动性卖单<br>&nbsp; &nbsp;&nbsp; &nbsp;返回该成交是否为主动性卖单。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：ISSELLORDER　当本笔成交为主动性卖盘时，返回1，否则为0。<br>&nbsp; &nbsp;&nbsp; &nbsp;(本函数仅个股在分笔成交分析周期有效)<br><br>&nbsp; &nbsp;&nbsp; &nbsp;二　、时间函数<br>&nbsp; &nbsp;&nbsp; &nbsp;DATE 日期<br>&nbsp; &nbsp;&nbsp; &nbsp;取得该周期从1900以来的年月日。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： DATE　例如函数返回1000101，表示2000年1月1日。<br>&nbsp; &nbsp;&nbsp; &nbsp;TIME 时间<br>&nbsp; &nbsp;&nbsp; &nbsp;取得该周期的时分秒。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： TIME　函数返回有效值范围为(000000-235959)。<br>&nbsp; &nbsp;&nbsp; &nbsp;YEAR 年份<br>&nbsp; &nbsp;&nbsp; &nbsp;取得该周期的年份。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：YEAR<br>&nbsp; &nbsp;&nbsp; &nbsp;MONTH 月份<br>&nbsp; &nbsp;&nbsp; &nbsp;取得该周期的月份。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：MONTH　函数返回有效值范围为(1-12)。<br>&nbsp; &nbsp;&nbsp; &nbsp;WEEK 星期<br>&nbsp; &nbsp;&nbsp; &nbsp;取得该周期的星期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： WEEK　函数返回有效值范围为(0-6)，0表示星期天。<br>&nbsp; &nbsp;&nbsp; &nbsp;DAY 日期<br>&nbsp; &nbsp;&nbsp; &nbsp;取得该周期的日期。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： DAY　函数返回有效值范围为(1-31)。<br>&nbsp; &nbsp;&nbsp; &nbsp;HOUR 小时<br>&nbsp; &nbsp;&nbsp; &nbsp;取得该周期的小时数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：HOUR　函数返回有效值范围为(0-23)，对于日线及更长的分析周期值为0。<br>&nbsp; &nbsp;&nbsp; &nbsp;MINUTE 分钟<br>&nbsp; &nbsp;&nbsp; &nbsp;取得该周期的分钟数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：MINUTE　函数返回有效值范围为(0-59)，对于日线及更长的分析周期值为0。<br>&nbsp; &nbsp;&nbsp; &nbsp;FROMOPEN 分钟<br>&nbsp; &nbsp;&nbsp; &nbsp;求当前时刻距开盘有多长时间。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　FROMOPEN　返回当前时刻距开盘有多长时间，单位为分钟。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如:　 FROMOPEN　当前时刻为早上十点，则返回31。<br><br>&nbsp; &nbsp;&nbsp; &nbsp;三　、引用函数<br>&nbsp; &nbsp;&nbsp; &nbsp;DRAWNULL 无效数<br>&nbsp; &nbsp;&nbsp; &nbsp;返回无效数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法： DRAWNULL<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　IF(CLOSE&gt;REF(CLOSE，1)，CLOSE，DRAWNULL)　表示下跌时分析图上不画线。<br>&nbsp; &nbsp;&nbsp; &nbsp;BACKSET 向前赋值<br>&nbsp; &nbsp;&nbsp; &nbsp;将当前位置到若干周期前的数据设为1。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　BACKSET(X，N)　若X非0，则将当前位置到N周期前的数值设为1。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　BACKSET(CLOSE&gt;OPEN，2)　若收阳则将该周期及前一周期数值设为1，否则为0。<br>&nbsp; &nbsp;&nbsp; &nbsp;BARSCOUNT 有效数据周期数<br>&nbsp; &nbsp;&nbsp; &nbsp;求总的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　BARSCOUNT(X)　第一个有效数据到当前的天数。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　BARSCOUNT(CLOSE)　对于日线数据取得上市以来总交易日数，对于分笔成交取得当日成交笔数，对于1分钟线取得当日交易分钟数。<br>&nbsp; &nbsp;&nbsp; &nbsp;BARSLAST 上一次条件成立位置<br>&nbsp; &nbsp;&nbsp; &nbsp;上一次条件成立到当前的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　BARSLAST(X)　上一次X不为0到现在的天数。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　BARSLAST(CLOSE/REF(CLOSE,1)&gt;=1.1)　表示上一个涨停板到当前的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;BARSSINCE 第一个条件成立位置<br>&nbsp; &nbsp;&nbsp; &nbsp;第一个条件成立到当前的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　BARSSINCE(X)　第一次X不为0到现在的天数。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　BARSSINCE(HIGH&gt;10)　表示股价超过10元时到当前的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;COUNT 统计<br>&nbsp; &nbsp;&nbsp; &nbsp;统计满足条件的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　COUNT(X，N)　统计N周期中满足X条件的周期数，若N=0则从第一个有效值开始。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　COUNT(CLOSE&gt;OPEN，20)　表示统计20周期内收阳的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;DMA 动态移动平均<br>&nbsp; &nbsp;&nbsp; &nbsp;求动态移动平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　DMA(X，A)　求X的动态移动平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;算法：　若Y=DMA(X，A)则Y=A*X+(1-A)*Y，其中Y表示上一周期Y值，A必须小于1。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　DMA(CLOSE，VOL/CAPITAL)　表示求以换手率作平滑因子的平均价。<br>&nbsp; &nbsp;&nbsp; &nbsp;HHV 最高值<br>&nbsp; &nbsp;&nbsp; &nbsp;求最高值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　HHV(X，N)　求N周期内X最高值，N=0则从第一个有效值开始。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　HHV(HIGH,30)　表示求30日最高价。<br>&nbsp; &nbsp;&nbsp; &nbsp;HHVBARS 上一高点位置<br>&nbsp; &nbsp;&nbsp; &nbsp;求上一高点到当前的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　HHVBARS(X，N)　求N周期内X最高值到当前周期数，N=0表示从第一个有效值开始统计。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　HHVBARS(HIGH，0)　求得历史新高到到当前的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;LLV 最低值<br>&nbsp; &nbsp;&nbsp; &nbsp;求最低值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　LLV(X，N)　求N周期内X最低值，N=0则从第一个有效值开始。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　LLV(LOW，0)　表示求历史最低价。<br>&nbsp; &nbsp;&nbsp; &nbsp;LLVBARS 上一低点位置<br>&nbsp; &nbsp;&nbsp; &nbsp;求上一低点到当前的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　LLVBARS(X，N)　求N周期内X最低值到当前周期数，N=0表示从第一个有效值开始统计。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　LLVBARS(HIGH，20)　求得20日最低点到当前的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;REVERSE 求相反数<br>&nbsp; &nbsp;&nbsp; &nbsp;求相反数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　REVERSE(X)　返回-X。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　REVERSE(CLOSE)　返回-CLOSE。<br>&nbsp; &nbsp;&nbsp; &nbsp;REF 向前引用<br>&nbsp; &nbsp;&nbsp; &nbsp;引用若干周期前的数据。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　REF(X，A)　引用A周期前的X值。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　REF(CLOSE，1)　表示上一周期的收盘价，在日线上就是昨收。<br>&nbsp; &nbsp;&nbsp; &nbsp;REFDATE 指定引用<br>&nbsp; &nbsp;&nbsp; &nbsp;引用指定日期的数据。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　REFDATE(X，A)　引用A日期的X值。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　REF(CLOSE，20011208)　表示2001年12月08日的收盘价。<br>&nbsp; &nbsp;&nbsp; &nbsp;SUM 总和<br>&nbsp; &nbsp;&nbsp; &nbsp;求总和。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　SUM(X，N)　统计N周期中X的总和，N=0则从第一个有效值开始。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　SUM(VOL，0)　表示统计从上市第一天以来的成交量总和。<br>&nbsp; &nbsp;&nbsp; &nbsp;FILTER 过滤<br>&nbsp; &nbsp;&nbsp; &nbsp;过滤连续出现的信号。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　FILTER(X，N)　X满足条件后，删除其后N周期内的数据置为0。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　FILTER(CLOSE&gt;OPEN，5)　查找阳线，5天内再次出现的阳线不被记录在内。<br>&nbsp; &nbsp;&nbsp; &nbsp;SUMBARS 累加到指定值的周期数<br>&nbsp; &nbsp;&nbsp; &nbsp;向前累加到指定值到现在的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　SUMBARS(X，A)　将X向前累加直到大于等于A，返回这个区间的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　SUMBARS(VOL，CAPITAL)　求完全换手到现在的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;SMA 累积平均<br>&nbsp; &nbsp;&nbsp; &nbsp;返回累积平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　SMA(X，N，M)　X的M日累积平均，M为权重，如Y=(X*M+Y*(N-M))/N<br>&nbsp; &nbsp;&nbsp; &nbsp;MA 简单移动平均<br>&nbsp; &nbsp;&nbsp; &nbsp;返回简单移动平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　MA(X，M)　X的M日简单移动平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;EMA 异同移动平均<br>&nbsp; &nbsp;&nbsp; &nbsp;返回异同移动平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　EMA(X，M)　X的M日异同移动平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;MEMA 平滑移动平均<br>&nbsp; &nbsp;&nbsp; &nbsp;返回平滑移动平均<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　MEMA(X，M)　X的M日平滑移动平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;EXPMA 加权移动平均<br>&nbsp; &nbsp;&nbsp; &nbsp;返回加权移动平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　EXPMA(X，M)　X的M日加权移动平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;EXPMEMA 加权平滑平均<br>&nbsp; &nbsp;&nbsp; &nbsp;返回加权平滑平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　EXPMEMA(X，M)　X的M日加权平滑平均。<br>&nbsp; &nbsp;&nbsp; &nbsp;RANGE 介于某个范围之间<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　RANGE(A,B,C)　A在B和C。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　RANGE(A，B，C)表示A大于B同时小于C时返回1，否则返回0。<br>&nbsp; &nbsp;&nbsp; &nbsp;CONST 取值设为常数<br>&nbsp; &nbsp;&nbsp; &nbsp;用法: 　CONST(A)　取A最后的值为常量.<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　CONST(INDEXC)表示取大盘现价。<br><br>&nbsp; &nbsp;&nbsp; &nbsp;四　、逻辑函数<br>&nbsp; &nbsp;&nbsp; &nbsp;CROSS 上穿<br>&nbsp; &nbsp;&nbsp; &nbsp;两条线交叉。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　CROSS(A，B)　表示当A从下方向上穿过B时返回1，否则返回0。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　CROSS(MA(CLOSE，5)，MA(CLOSE，10))　表示5日均线与10日均线交金叉。<br>&nbsp; &nbsp;&nbsp; &nbsp;LONGCROSS 维持一定周期后上穿<br>&nbsp; &nbsp;&nbsp; &nbsp;两条线维持一定周期后交叉。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　LONGCROSS(A，B，N)　表示A在N周期内都小于B，本周期从下方向上穿过B时返回1，否则返回0。<br>&nbsp; &nbsp;&nbsp; &nbsp;UPNDAY 连涨<br>&nbsp; &nbsp;&nbsp; &nbsp;返回是否连涨周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　UPNDAY(CLOSE,M)　表示连涨M个周期。<br>&nbsp; &nbsp;&nbsp; &nbsp;DOWNNDAY 连跌<br>&nbsp; &nbsp;&nbsp; &nbsp;返回是否连跌周期。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　DOWNNDAY(CLOSE，M)　表示连跌M个周期。<br>&nbsp; &nbsp;&nbsp; &nbsp;NDAY 连大<br>&nbsp; &nbsp;&nbsp; &nbsp;返回是否持续存在X&gt;Y。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　NDAY(CLOSE，OPEN，3)　表示连续3日收阳线。<br>&nbsp; &nbsp;&nbsp; &nbsp;EXIST 存在<br>&nbsp; &nbsp;&nbsp; &nbsp;是否存在。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　EXIST(CLOSE&gt;OPEN，10)　表示前10日内存在着阳线。<br>&nbsp; &nbsp;&nbsp; &nbsp;EVERY 一直存在<br>&nbsp; &nbsp;&nbsp; &nbsp;一直存在。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　EVERY(CLOSE&gt;OPEN，10)　表示前10日内一直阳线。<br>&nbsp; &nbsp;&nbsp; &nbsp;LAST 持续存在<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　LAST(X,A,B)A&gt;B，表示从前A日到前B日一直满足X条件。若A为0，表示从第一天开始，B为0，表示到最后日止。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　LAST(CLOSE&gt;OPEN，10，5)　表示从前10日到前5日内一直阳线。 <br>五　、算术函数<br>&nbsp; &nbsp;&nbsp; &nbsp;NOT 取反<br>&nbsp; &nbsp;&nbsp; &nbsp;求逻辑非。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　NOT(X)　返回非X，即当X=0时返回1，否则返回0。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　NOT(ISUP)　表示平盘或收阴。<br>&nbsp; &nbsp;&nbsp; &nbsp;IF 逻辑判断<br>&nbsp; &nbsp;&nbsp; &nbsp;根据条件求不同的值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　IF(X，A，B)　若X不为0则返回A，否则返回B。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　IF(CLOSE&gt;OPEN，HIGH，LOW)表示该周期收阳则返回最高值，否则返回最低值。<br>&nbsp; &nbsp;&nbsp; &nbsp;IFF 逻辑判断<br>&nbsp; &nbsp;&nbsp; &nbsp;根据条件求不同的值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　IFF(X，A，B)　若X不为0则返回A，否则返回B。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　IFF(CLOSE&gt;OPEN，HIGH，LOW)　表示该周期收阳则返回最高值，否则返回最低值。<br>&nbsp; &nbsp;&nbsp; &nbsp;IFN 逻辑判断<br>&nbsp; &nbsp;&nbsp; &nbsp;根据条件求不同的值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　IFN(X，A，B)　若X不为0则返回B，否则返回A。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　IFN(CLOSE&gt;OPEN，HIGH，LOW)　表示该周期收阴则返回最高值，否则返回最低值。<br>&nbsp; &nbsp;&nbsp; &nbsp;MAX 较大值<br>&nbsp; &nbsp;&nbsp; &nbsp;求最大值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　MAX(A,B)　返回A和B中的较大值。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　MAX(CLOSE-OPEN，0)　表示若收盘价大于开盘价返回它们的差值，否则返回0。<br>&nbsp; &nbsp;&nbsp; &nbsp;MIN 较小值<br>&nbsp; &nbsp;&nbsp; &nbsp;求最小值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　MIN(A，B)　返回A和B中的较小值。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　MIN(CLOSE，OPEN)　返回开盘价和收盘价中的较小值。<br><br>&nbsp; &nbsp;&nbsp; &nbsp;六　、数学函数<br>&nbsp; &nbsp;&nbsp; &nbsp;ACOS 反余弦<br>&nbsp; &nbsp;&nbsp; &nbsp;反余弦值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　ACOS(X)　返回X的反余弦值。<br>&nbsp; &nbsp;&nbsp; &nbsp;ASIN 反正弦<br>&nbsp; &nbsp;&nbsp; &nbsp;反正弦值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　ASIN(X)　返回X的反正弦值。<br>&nbsp; &nbsp;&nbsp; &nbsp;ATAN 反正切<br>&nbsp; &nbsp;&nbsp; &nbsp;反正切值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　ATAN(X)　返回X的反正切值。<br>&nbsp; &nbsp;&nbsp; &nbsp;COS 余弦<br>&nbsp; &nbsp;&nbsp; &nbsp;余弦值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　COS(X)　返回X的余弦值。<br>&nbsp; &nbsp;&nbsp; &nbsp;SIN 正弦<br>&nbsp; &nbsp;&nbsp; &nbsp;正弦值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　SIN(X)　返回X的正弦值。<br>&nbsp; &nbsp;&nbsp; &nbsp;TAN 正切<br>&nbsp; &nbsp;&nbsp; &nbsp;正切值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　TAN(X)　返回X的正切值。<br>&nbsp; &nbsp;&nbsp; &nbsp;EXP 指数<br>&nbsp; &nbsp;&nbsp; &nbsp;指数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　EXP(X)　e的X次幂。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　EXP(CLOSE)　返回e的CLOSE次幂。<br>&nbsp; &nbsp;&nbsp; &nbsp;LN 自然对数<br>&nbsp; &nbsp;&nbsp; &nbsp;求自然对数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　LN(X)　以e为底的对数。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　LN(CLOSE)　求收盘价的对数。<br>&nbsp; &nbsp;&nbsp; &nbsp;LOG 对数<br>&nbsp; &nbsp;&nbsp; &nbsp;求10为底的对数。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　LOG(X)　取得X的对数。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　LOG(100)　等于2。<br>&nbsp; &nbsp;&nbsp; &nbsp;SQRT 开方<br>&nbsp; &nbsp;&nbsp; &nbsp;开平方。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　SQRT(X)　 求X的平方根。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　SQRT(CLOSE)　收盘价的平方根。<br>&nbsp; &nbsp;&nbsp; &nbsp;ABS 绝对值<br>&nbsp; &nbsp;&nbsp; &nbsp;求绝对值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　ABS(X)　返回X的绝对值。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　ABS(-34)　返回34。<br>&nbsp; &nbsp;&nbsp; &nbsp;POW 乘幂<br>&nbsp; &nbsp;&nbsp; &nbsp;乘幂。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　POW(A，B)　返回A的B次幂。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　POW(CLOSE，3)　求得收盘价的3次方。<br>&nbsp; &nbsp;&nbsp; &nbsp;CEILING 向上舍入<br>&nbsp; &nbsp;&nbsp; &nbsp;向上舍入。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　CEILING(A)　返回沿A数值增大方向最接近的整数。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　CEILING(12.3)　求得13，CEILING(-3.5)求得-3。<br>&nbsp; &nbsp;&nbsp; &nbsp;FLOOR 向下舍入<br>&nbsp; &nbsp;&nbsp; &nbsp;向下舍入。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　FLOOR(A)　返回沿A数值减小方向最接近的整数。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　FLOOR(12.3)　求得12，FLOOR(-3.5)求得-4。<br>&nbsp; &nbsp;&nbsp; &nbsp;INTPART 取整<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　INTPART(A)　返回沿A绝对值减小方向最接近的整数。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　INTPART(12.3)　求得12，INTPART(-3.5)求得-3。<br>&nbsp; &nbsp;&nbsp; &nbsp;BETWEEN： 介于<br>&nbsp; &nbsp;&nbsp; &nbsp;介于。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　BETWEEN(A，B，C)　表示A处于B和C之间时返回1，否则返回0。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　BETWEEN(CLOSE，MA(CLOSE，10)，MA(CLOSE，5))表示收盘价介于5日均线和10日均线之间。<br><br>&nbsp; &nbsp;&nbsp; &nbsp;七　、统计函数<br>&nbsp; &nbsp;&nbsp; &nbsp;AVEDEV 平均绝对方差<br>&nbsp; &nbsp;&nbsp; &nbsp;AVEDEV(X，N) 　返回平均绝对方差。<br>&nbsp; &nbsp;&nbsp; &nbsp;DEVSQ 数据偏差平方和<br>&nbsp; &nbsp;&nbsp; &nbsp;DEVSQ(X，N) 　返回数据偏差平方和。<br>&nbsp; &nbsp;&nbsp; &nbsp;FORCAST 线性回归预测值<br>&nbsp; &nbsp;&nbsp; &nbsp;FORCAST(X，N)　 返回线性回归预测值。<br>&nbsp; &nbsp;&nbsp; &nbsp;SLOPE 线性回归斜率<br>&nbsp; &nbsp;&nbsp; &nbsp;SLOPE(X，N)　 返回线性回归斜率。<br>&nbsp; &nbsp;&nbsp; &nbsp;STD 估算标准差<br>&nbsp; &nbsp;&nbsp; &nbsp;STD(X，N)　 返回估算标准差。<br>&nbsp; &nbsp;&nbsp; &nbsp;STDP 总体标准差<br>&nbsp; &nbsp;&nbsp; &nbsp;STDP(X，N)　 返回总体标准差。<br>&nbsp; &nbsp;&nbsp; &nbsp;VAR 估算样本方差<br>&nbsp; &nbsp;&nbsp; &nbsp;VAR(X，N)　 返回估算样本方差。<br>&nbsp; &nbsp;&nbsp; &nbsp;VARP 总体样本方差<br>&nbsp; &nbsp;&nbsp; &nbsp;VARP(X，N)　 返回总体样本方差 。<br><br>&nbsp; &nbsp;&nbsp; &nbsp;八　、横向统计<br>&nbsp; &nbsp;&nbsp; &nbsp;BLOCKSETNUM 板块股票个数<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　BLOCKSETNUM(板块名称)　返回该板块股票个数。<br>&nbsp; &nbsp;&nbsp; &nbsp;HORCALC 多股统计<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　HORCALC(板块名称，数据项，计算方式，权重)<br>&nbsp; &nbsp;&nbsp; &nbsp;数据项：100-HIGH，101-OPEN，102-LOW，103-CLOSE，104-VOL，105-涨幅<br>&nbsp; &nbsp;&nbsp; &nbsp;计算方式：　0-累加，1-排名次<br>&nbsp; &nbsp;&nbsp; &nbsp;权重：　0-总股本，1-流通股本，2-等同权重，3-流通市值<br><br>&nbsp; &nbsp;&nbsp; &nbsp;九　、形态函数<br>&nbsp; &nbsp;&nbsp; &nbsp;COST 成本分布<br>&nbsp; &nbsp;&nbsp; &nbsp;成本分布情况。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　COST(10)，表示10%获利盘的价格是多少，即有10%的持仓量在该价格以下，其余90%在该价格以上，为套牢盘。<br>&nbsp; &nbsp;&nbsp; &nbsp;该函数仅对日线分析周期有效。<br>&nbsp; &nbsp;&nbsp; &nbsp;PEAK 波峰值<br>&nbsp; &nbsp;&nbsp; &nbsp;前M个ZIG转向波峰值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　PEAK(K，N，M)　表示之字转向ZIG(K，N)的前M个波峰的数值，M必须大于等于1。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　PEAK(1,5,1)　表示%5最高价ZIG转向的上一个波峰的数值。<br>&nbsp; &nbsp;&nbsp; &nbsp;PEAKBARS 波峰位置<br>&nbsp; &nbsp;&nbsp; &nbsp;前M个ZIG转向波峰到当前距离。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　PEAKBARS(K，N，M)　表示之字转向ZIG(K，N)的前M个波峰到当前的周期数，M必须大于等于1。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　PEAKBARS(0，5，1)　表示%5开盘价ZIG转向的上一个波峰到当前的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;SAR 抛物转向<br>&nbsp; &nbsp;&nbsp; &nbsp;抛物转向。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　 SAR(N，S，M)，N为计算周期，S为步长，M为极值。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　SAR(10，2，20)　表示计算10日抛物转向，步长为2%，极限值为20%。<br>&nbsp; &nbsp;&nbsp; &nbsp;SARTURN 抛物转向点<br>&nbsp; &nbsp;&nbsp; &nbsp;抛物转向点。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　SARTURN(N，S，M)　N为计算周期，S为步长，M为极值，若发生向上转向则返回1，若发生向下转向则返回-1，否则为0。<br>&nbsp; &nbsp;&nbsp; &nbsp;其用法与SAR函数相同。<br>&nbsp; &nbsp;&nbsp; &nbsp;TROUGH 波谷值<br>&nbsp; &nbsp;&nbsp; &nbsp;前M个ZIG转向波谷值。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　TROUGH(K，N，M)　表示之字转向ZIG(K，N)的前M个波谷的数值，M必须大于等于1。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　TROUGH(2，5，2)　表示%5最低价ZIG转向的前2个波谷的数值。<br>&nbsp; &nbsp;&nbsp; &nbsp;TROUGHBARS 波谷位置<br>&nbsp; &nbsp;&nbsp; &nbsp;前M个ZIG转向波谷到当前距离。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　TROUGHBARS(K，N，M)　表示之字转向ZIG(K，N)的前M个波谷到当前的周期数，M必须大于等于1。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　TROUGH(2，5，2)　表示%5最低价ZIG转向的前2个波谷到当前的周期数。<br>&nbsp; &nbsp;&nbsp; &nbsp;WINNER 获利盘比例<br>&nbsp; &nbsp;&nbsp; &nbsp;获利盘比例。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　WINNER(CLOSE)　表示以当前收市价卖出的获利盘比例。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　返回0.1表示10%获利盘，WINNER(10.5)表示10.5元价格的获利盘比例。<br>&nbsp; &nbsp;&nbsp; &nbsp;该函数仅对日线分析周期有效。<br>&nbsp; &nbsp;&nbsp; &nbsp;LWINNER 近期获利盘比例<br>&nbsp; &nbsp;&nbsp; &nbsp;近期获利盘比例。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　LWINNER(5，CLOSE)　表示最近5天的那部分成本以当前收市价卖出的获利盘比例。例如返回0.1表示10%获利盘。<br>&nbsp; &nbsp;&nbsp; &nbsp;PWINNER 远期获利盘比例<br>&nbsp; &nbsp;&nbsp; &nbsp;远期获利盘比例。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　PWINNER(5，CLOSE)　表示5天前的那部分成本以当前收市价卖出的获利盘比例。例如返回0.1表示10%获利盘。<br>&nbsp; &nbsp;&nbsp; &nbsp;COSTEX 区间成本<br>&nbsp; &nbsp;&nbsp; &nbsp;区间成本。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　COSTEX(CLOSE，REF(CLOSE))，表示近两日收盘价格间筹码的成本，例如返回10表示区间成本为20元。<br>&nbsp; &nbsp;&nbsp; &nbsp;该函数仅对日线分析周期有效。<br>&nbsp; &nbsp;&nbsp; &nbsp;PPART 远期成本分布比例<br>&nbsp; &nbsp;&nbsp; &nbsp;远期成本分布比例。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　PPART(10)，表示10前的成本占总成本的比例，0.2表示20%。<br>&nbsp; &nbsp;&nbsp; &nbsp;ZIG 之字转向<br>&nbsp; &nbsp;&nbsp; &nbsp;之字转向。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　ZIG(K，N)　当价格变化量超过N%时转向，K表示0:开盘价，1:最高价，2:最低价，3:收盘价，其余:数组信息<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　ZIG(3，5)　表示收盘价的5%的ZIG转向。<br><br>&nbsp; &nbsp;&nbsp; &nbsp;十　、大盘函数<br>&nbsp; &nbsp;&nbsp; &nbsp;INDEXA 　 返回大盘成交额<br>&nbsp; &nbsp;&nbsp; &nbsp;INDEXADV 　 返回上涨家数<br>&nbsp; &nbsp;&nbsp; &nbsp;INDEXDEC 　 返回下跌家数<br>&nbsp; &nbsp;&nbsp; &nbsp;INDEXC 　 返回大盘收盘价<br>&nbsp; &nbsp;&nbsp; &nbsp;INDEXH 　 返回大盘最高价<br>&nbsp; &nbsp;&nbsp; &nbsp;INDEXL 　 返回大盘最低价<br>&nbsp; &nbsp;&nbsp; &nbsp;INDEXO 　 返回大盘开盘价<br>&nbsp; &nbsp;&nbsp; &nbsp;INDEXV 　 返回大盘成交量<br><br>&nbsp; &nbsp;&nbsp; &nbsp;十一、绘图函数<br>&nbsp; &nbsp;&nbsp; &nbsp;PLOYLINE 折线段<br>&nbsp; &nbsp;&nbsp; &nbsp;在图形上绘制折线段。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　PLOYLINE(COND，PRICE)，当COND条件满足时，以PRICE位置为顶点画折线连接。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　PLOYLINE(HIGH&gt;=HHV(HIGH，20)，HIGH)表示在创20天新高点之间画折线。<br>&nbsp; &nbsp;&nbsp; &nbsp;DRAWLINE 绘制直线段<br>&nbsp; &nbsp;&nbsp; &nbsp;在图形上绘制直线段。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　DRAWLINE(COND1，PRICE1，COND2，PRICE2，EXPAND)<br>&nbsp; &nbsp;&nbsp; &nbsp;当COND1条件满足时，在PRICE1位置画直线起点，当COND2条件满足时，在PRICE2位置画直线终点，EXPAND为延长类型。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　DRAWLINE(HIGH&gt;=HHV(HIGH，20)，HIGH，LOW&lt;=LLV(LOW，20)，LOW，1)　表示在创20天新高与创20天新低之间画直线并且向右延长。<br>&nbsp; &nbsp;&nbsp; &nbsp;DRAWKLINE 绘制K线<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　DRAWKLINE(HIGH，OPEN，LOW，CLOSE)　以HIGH为最高价，OPEN为开盘价，LOW为最低，CLOSE收盘画K线。<br>&nbsp; &nbsp;&nbsp; &nbsp;STICKLINE 绘制柱线<br>&nbsp; &nbsp;&nbsp; &nbsp;在图形上绘制柱线。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　STICKLINE(COND，PRICE1，PRICE2，WIDTH，EMPTY)，当COND条件满足时，在PRICE1和PRICE2位置之间画柱状线，宽度为WIDTH(10为标准间距)，EMPTH不为0则画空心柱。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　STICKLINE(CLOSE&gt;OPEN，CLOSE，OPEN，0.8，1)表示画K线中阳线的空心柱体部分。<br>&nbsp; &nbsp;&nbsp; &nbsp;DRAWICON 绘制图标<br>&nbsp; &nbsp;&nbsp; &nbsp;在图形上绘制小图标。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　DRAWICON(COND，PRICE，TYPE)，当COND条件满足时，在PRICE位置画TYPE号图标。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　DRAWICON(CLOSE&gt;OPEN，LOW，1)　表示当收阳时在最低价位置画1号图标。图标一共有九个，图形如附图。序号，最下面的是“1”号，最上面的是“9”号。<br><br>&nbsp; &nbsp;&nbsp; &nbsp;DRAWTEXT 显示文字<br>&nbsp; &nbsp;&nbsp; &nbsp;在图形上显示文字。<br>&nbsp; &nbsp;&nbsp; &nbsp;用法：　DRAWTEXT(COND，PRICE，TEXT)，当COND条件满足时，在PRICE位置书写文字TEXT。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：　DRAWTEXT(CLOSE/OPEN&gt;1.08，LOW，大阳线)表示当日涨幅大于8%时在最低价位置显示大阳线字样。<br><br>&nbsp; &nbsp;&nbsp; &nbsp;十二、财务函数<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(1)　　　总股本（万股）<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(2)　　　`！、，D`！BB、股（万股）<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(3)　　　发起人法人股（万股）<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(4)　　　法人股（万股）<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(5)　　　B股（万股）<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(6)　　　H股（万股）<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(7)　　　流通股本（万股）<br>&nbsp; &nbsp;&nbsp; &nbsp;CAPITAL　　 　　流通股本（手）<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(8) 职工股（万股）<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(10) 总资产<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(11) 流动资产<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(12) 固定资产<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(13) 无形资产<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(14) 长期投资<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(15) 流动负债<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(16) 　　长期负债<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(17) 　　资本公积金<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(18) 每股公积金<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(19) 　　股东权益<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(20) 　　主营收入<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(21) 　　主营利益<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(22) 　　其它利益<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(23) 　　营业利益<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(24) 　　投资收益<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(25) 　　补贴收入<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(26) 　　营业外收支<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(27) 　　上年损益调整<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(28)　　 利益总额<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(29) 　　税后利益<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(30) 　　净利益<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(31) 　　未分配利益<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(32) 每股未分配利润<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(33) 每股收益<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(34) 　 每股净资产<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(35)　　 调整每股净资产<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(36) 　 股东权益比<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(40) 流通市值<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(41) 总市值<br>&nbsp; &nbsp;&nbsp; &nbsp;FINANCE(42) 上市日期<br><br>&nbsp; &nbsp;&nbsp; &nbsp;十三、动态行情函数<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(3) 前收盘价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(4) 今开<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(5) 最高<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(6) 最低<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(7) 现价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(8) 总手<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(9) 现手<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(10) 总成交金额<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(11) 均价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(12) 日升跌<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(13) 振幅度<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(14) 涨幅度<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(15) 委托比<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(16) 委量差<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(17) 量比<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(20) 最新叫买价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(21) 最新叫卖价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(22) 内盘<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(23) 外盘<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(25) 买一量<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(26) 买二量<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(27) 买三量<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(28) 买一价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(29) 买二价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(30) 买三价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(31) 卖一量<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(32) 卖二量<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(33) 卖三量<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(34) 卖一价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(35) 卖二价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(36) 卖三价<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(37) 换手率<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(39) 市盈率<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(40) 成交方向<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(50) 采样点数<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(51) 内外比<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(52) 多空平衡<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(53) 多头获利<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(54) 空头回补<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(55) 多头止损<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(56) 空头止损<br>&nbsp; &nbsp;&nbsp; &nbsp;DYNAINFO(57) 笔升跌<br><br>&nbsp; &nbsp;&nbsp; &nbsp;十四、线形和颜色属性<br>&nbsp; &nbsp;&nbsp; &nbsp;COLOR 自定义色<br>&nbsp; &nbsp;&nbsp; &nbsp;格式为COLOR+“RRGGBB”：RR、GG、BB表示红蓝色、绿色和蓝色的分量，每种颜色的取值范围是00-FF，采用了16进制。<br>&nbsp; &nbsp;&nbsp; &nbsp;例如：MA5：MA(CLOSE，5)，COLOR00FFFF　表示纯红色与纯绿色的混合色：COLOR808000表示淡蓝色和淡绿色的混合色。<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORBLACK 画黑色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORBLUE 画蓝色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORGREEN 画绿色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORCYAN 画青色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORRED 画红色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORMAGENTA 画洋红色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORBROWN 画棕色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORLIGRAY 画淡灰色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORGRAY　　　 画深灰色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORLIBLUE 画淡蓝色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORLIGREEN 画淡绿色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORLICYAN 画淡青色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORLIRED 画淡红色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORLIMAGENTA 画淡洋红色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORYELLOW 画黄色<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORWHITE 画白色<br>&nbsp; &nbsp;&nbsp; &nbsp;LINETHICK 线型粗细<br>&nbsp; &nbsp;&nbsp; &nbsp;格式：“LINETHICK+(1-9)”　参数的取值范围在1—9之间，“LINETHICK1”表示最细的线，而“LINETHICK9”表示最粗的线。<br>&nbsp; &nbsp;&nbsp; &nbsp;STICK 画柱状线<br>&nbsp; &nbsp;&nbsp; &nbsp;COLORSTICK 画彩色柱状线<br>&nbsp; &nbsp;&nbsp; &nbsp;VOLSTICK 画彩色柱状线<br>&nbsp; &nbsp;&nbsp; &nbsp;成交量柱状线，当股价上涨时显示红色空心柱，则显示绿色实心柱<br>&nbsp; &nbsp;&nbsp; &nbsp;LINESTICK 同时画出柱状线和指标线<br>&nbsp; &nbsp;&nbsp; &nbsp;CROSSDOT 画小叉线<br>&nbsp; &nbsp;&nbsp; &nbsp;CIRCLEDOT 画小圆圈线<br>&nbsp; &nbsp;&nbsp; &nbsp;POINTDOT 画小圆点线<br>附一：符号一览表<br><br>符号&nbsp; &nbsp; &nbsp; &nbsp; 名称&nbsp; &nbsp; &nbsp; &nbsp; 举例&nbsp; &nbsp; &nbsp; &nbsp; 符号&nbsp; &nbsp; &nbsp; &nbsp; 名称&nbsp; &nbsp; &nbsp; &nbsp; 举例<br>+&nbsp; &nbsp; &nbsp; &nbsp; 加&nbsp; &nbsp; &nbsp; &nbsp; X + Y&nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp;&nbsp; &nbsp; &nbsp; &nbsp; 并且&nbsp; &nbsp; &nbsp; &nbsp; X&gt;Y &amp;&amp; Y&gt;Z<br>-&nbsp; &nbsp; &nbsp; &nbsp; 减&nbsp; &nbsp; &nbsp; &nbsp; X - Y&nbsp; &nbsp; &nbsp; &nbsp; ||&nbsp; &nbsp; &nbsp; &nbsp; 或者&nbsp; &nbsp; &nbsp; &nbsp; X&gt;Y || Y&gt;Z<br>*&nbsp; &nbsp; &nbsp; &nbsp; 乘&nbsp; &nbsp; &nbsp; &nbsp; X * Y&nbsp; &nbsp; &nbsp; &nbsp; $&nbsp; &nbsp; &nbsp; &nbsp; 修饰符号&nbsp; &nbsp; &nbsp; &nbsp; "000014$CLOSE"<br>/&nbsp; &nbsp; &nbsp; &nbsp; 除&nbsp; &nbsp; &nbsp; &nbsp; X / Y&nbsp; &nbsp; &nbsp; &nbsp; (&nbsp; &nbsp; &nbsp; &nbsp; 括号&nbsp; &nbsp; &nbsp; &nbsp; HIGH/(CLOSE+OPEN)<br>&lt;&nbsp; &nbsp; &nbsp; &nbsp; 小于&nbsp; &nbsp; &nbsp; &nbsp; X &lt; Y&nbsp; &nbsp; &nbsp; &nbsp; )&nbsp; &nbsp; &nbsp; &nbsp; 反括号&nbsp; &nbsp; &nbsp; &nbsp; HIGH/(CLOSE+OPEN)<br>&gt;&nbsp; &nbsp; &nbsp; &nbsp; 大于&nbsp; &nbsp; &nbsp; &nbsp; X &gt; Y&nbsp; &nbsp; &nbsp; &nbsp; ,&nbsp; &nbsp; &nbsp; &nbsp; 逗号&nbsp; &nbsp; &nbsp; &nbsp; MA(Close,3)<br>&lt;=&nbsp; &nbsp; &nbsp; &nbsp; 小于等于&nbsp; &nbsp; &nbsp; &nbsp; X &lt;= Y&nbsp; &nbsp; &nbsp; &nbsp; :&nbsp; &nbsp; &nbsp; &nbsp; 输出&nbsp; &nbsp; &nbsp; &nbsp; 输出:CLOSE+OPEN<br>&gt;=&nbsp; &nbsp; &nbsp; &nbsp; 大于等于&nbsp; &nbsp; &nbsp; &nbsp; X &gt;= Y&nbsp; &nbsp; &nbsp; &nbsp; :=&nbsp; &nbsp; &nbsp; &nbsp; 赋值&nbsp; &nbsp; &nbsp; &nbsp; 变量1:=HIGH<br>=&nbsp; &nbsp; &nbsp; &nbsp; 等于&nbsp; &nbsp; &nbsp; &nbsp; X = Y&nbsp; &nbsp; &nbsp; &nbsp; "&nbsp; &nbsp; &nbsp; &nbsp; 双引号&nbsp; &nbsp; &nbsp; &nbsp; "000014$OPEN"<br>{}&nbsp; &nbsp; &nbsp; &nbsp; 注释符号&nbsp; &nbsp; &nbsp; &nbsp; {注释部分}&nbsp; &nbsp; &nbsp; &nbsp; .&nbsp; &nbsp; &nbsp; &nbsp; 点号&nbsp; &nbsp; &nbsp; &nbsp; KDJ.K<br>AND&nbsp; &nbsp; &nbsp; &nbsp; 并且&nbsp; &nbsp; &nbsp; &nbsp; X&gt;Y AND Y&gt;Z&nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; 分号&nbsp; &nbsp; &nbsp; &nbsp; A:=CLOSE;<br>OR&nbsp; &nbsp; &nbsp; &nbsp; 或者&nbsp; &nbsp; &nbsp; &nbsp; X&gt;Y OR Y&gt;Z&nbsp; &nbsp; &nbsp; &nbsp; #&nbsp; &nbsp; &nbsp; &nbsp; 变周期符号&nbsp; &nbsp; &nbsp; &nbsp; TMP1:=CLOSE#WEEK<br>&lt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; 非&nbsp; &nbsp; &nbsp; &nbsp; X &lt;&gt; Y&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 单引号&nbsp; &nbsp; &nbsp; &nbsp; 大阳线<br><br>附二：引用表达式<br><br>引用指标指标&nbsp; &nbsp; &nbsp; &nbsp; "指标名称.指标线名称(参数表)"<br>引用交易系统指标&nbsp; &nbsp; &nbsp; &nbsp; "SYSTEM.指标名称.交易类型(参数表)"<br>引用条件选股指标&nbsp; &nbsp; &nbsp; &nbsp; "EXPLORER.指标名称(参数表)"<br>跨周期引用指标&nbsp; &nbsp; &nbsp; &nbsp; "各种类型指标名称#周期类型(参数表)"<br>引用任意股票的数据&nbsp; &nbsp; &nbsp; &nbsp; "股票代码$数据名称"<br>引用扩展数据&nbsp; &nbsp; &nbsp; &nbsp; EXTDATA(N) 分析家N=1-11 飞狐N=1-13<br>引用横向统计日线数据(1-N)&nbsp; &nbsp; &nbsp; &nbsp; ESTDATA(N) <br>引用类函数第二个变量参数&nbsp; &nbsp; &nbsp; &nbsp; 类函数名称(第一参数,变量名或变量表达式)<br><br><br>000000&nbsp; &nbsp; &nbsp; &nbsp; cccccc&nbsp; &nbsp; &nbsp; &nbsp; 000000&nbsp; &nbsp; &nbsp; &nbsp; 003300&nbsp; &nbsp; &nbsp; &nbsp; 006600&nbsp; &nbsp; &nbsp; &nbsp; 009900&nbsp; &nbsp; &nbsp; &nbsp; 00CC00&nbsp; &nbsp; &nbsp; &nbsp; 00FF00&nbsp; &nbsp; &nbsp; &nbsp; 000033&nbsp; &nbsp; &nbsp; &nbsp; 003333&nbsp; &nbsp; &nbsp; &nbsp; 006633&nbsp; &nbsp; &nbsp; &nbsp; 009933&nbsp; &nbsp; &nbsp; &nbsp; 00CC33&nbsp; &nbsp; &nbsp; &nbsp; 00FF33&nbsp; &nbsp; &nbsp; &nbsp; 000066&nbsp; &nbsp; &nbsp; &nbsp; 003366&nbsp; &nbsp; &nbsp; &nbsp; 006666&nbsp; &nbsp; &nbsp; &nbsp; 009966&nbsp; &nbsp; &nbsp; &nbsp; 00CC66&nbsp; &nbsp; &nbsp; &nbsp; 00FF66<br>111111&nbsp; &nbsp; &nbsp; &nbsp; DDDDDD&nbsp; &nbsp; &nbsp; &nbsp; 330000&nbsp; &nbsp; &nbsp; &nbsp; 333300&nbsp; &nbsp; &nbsp; &nbsp; 336600&nbsp; &nbsp; &nbsp; &nbsp; 339900&nbsp; &nbsp; &nbsp; &nbsp; 33CC00&nbsp; &nbsp; &nbsp; &nbsp; 33FF00&nbsp; &nbsp; &nbsp; &nbsp; 330033&nbsp; &nbsp; &nbsp; &nbsp; 333333&nbsp; &nbsp; &nbsp; &nbsp; 336633&nbsp; &nbsp; &nbsp; &nbsp; 339933&nbsp; &nbsp; &nbsp; &nbsp; 33CC33&nbsp; &nbsp; &nbsp; &nbsp; 33FF33&nbsp; &nbsp; &nbsp; &nbsp; 330066&nbsp; &nbsp; &nbsp; &nbsp; 333366&nbsp; &nbsp; &nbsp; &nbsp; 336666&nbsp; &nbsp; &nbsp; &nbsp; 339966&nbsp; &nbsp; &nbsp; &nbsp; 33CC66&nbsp; &nbsp; &nbsp; &nbsp; 33FF66<br>222222&nbsp; &nbsp; &nbsp; &nbsp; EEEEEE&nbsp; &nbsp; &nbsp; &nbsp; 660000&nbsp; &nbsp; &nbsp; &nbsp; 663300&nbsp; &nbsp; &nbsp; &nbsp; 666600&nbsp; &nbsp; &nbsp; &nbsp; 669900&nbsp; &nbsp; &nbsp; &nbsp; 66CC00&nbsp; &nbsp; &nbsp; &nbsp; 66FF00&nbsp; &nbsp; &nbsp; &nbsp; 660033&nbsp; &nbsp; &nbsp; &nbsp; 663333&nbsp; &nbsp; &nbsp; &nbsp; 666633&nbsp; &nbsp; &nbsp; &nbsp; 669933&nbsp; &nbsp; &nbsp; &nbsp; 66CC33&nbsp; &nbsp; &nbsp; &nbsp; 66FF33&nbsp; &nbsp; &nbsp; &nbsp; 660066&nbsp; &nbsp; &nbsp; &nbsp; 663366&nbsp; &nbsp; &nbsp; &nbsp; 666666&nbsp; &nbsp; &nbsp; &nbsp; 669966&nbsp; &nbsp; &nbsp; &nbsp; 66CC66&nbsp; &nbsp; &nbsp; &nbsp; 66FF66<br>333333&nbsp; &nbsp; &nbsp; &nbsp; FFFFFF&nbsp; &nbsp; &nbsp; &nbsp; 990000&nbsp; &nbsp; &nbsp; &nbsp; 993300&nbsp; &nbsp; &nbsp; &nbsp; 996600&nbsp; &nbsp; &nbsp; &nbsp; 999900&nbsp; &nbsp; &nbsp; &nbsp; 99CC00&nbsp; &nbsp; &nbsp; &nbsp; 99FF00&nbsp; &nbsp; &nbsp; &nbsp; 990033&nbsp; &nbsp; &nbsp; &nbsp; 993333&nbsp; &nbsp; &nbsp; &nbsp; 996633&nbsp; &nbsp; &nbsp; &nbsp; 999933&nbsp; &nbsp; &nbsp; &nbsp; 99CC33&nbsp; &nbsp; &nbsp; &nbsp; 99FF33&nbsp; &nbsp; &nbsp; &nbsp; 990066&nbsp; &nbsp; &nbsp; &nbsp; 993366&nbsp; &nbsp; &nbsp; &nbsp; 996666&nbsp; &nbsp; &nbsp; &nbsp; 999966&nbsp; &nbsp; &nbsp; &nbsp; 99CC66&nbsp; &nbsp; &nbsp; &nbsp; 99FF66<br>444444&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; CC0000&nbsp; &nbsp; &nbsp; &nbsp; CC3300&nbsp; &nbsp; &nbsp; &nbsp; CC6600&nbsp; &nbsp; &nbsp; &nbsp; CC9900&nbsp; &nbsp; &nbsp; &nbsp; CCCC00&nbsp; &nbsp; &nbsp; &nbsp; CCFF00&nbsp; &nbsp; &nbsp; &nbsp; CC0033&nbsp; &nbsp; &nbsp; &nbsp; CC3333&nbsp; &nbsp; &nbsp; &nbsp; CC6633&nbsp; &nbsp; &nbsp; &nbsp; CC9933&nbsp; &nbsp; &nbsp; &nbsp; CCCC33&nbsp; &nbsp; &nbsp; &nbsp; CCFF33&nbsp; &nbsp; &nbsp; &nbsp; CC0066&nbsp; &nbsp; &nbsp; &nbsp; CC3366&nbsp; &nbsp; &nbsp; &nbsp; CC6666&nbsp; &nbsp; &nbsp; &nbsp; CC9966&nbsp; &nbsp; &nbsp; &nbsp; CCCC66&nbsp; &nbsp; &nbsp; &nbsp; CCFF66<br>555555&nbsp; &nbsp; &nbsp; &nbsp; 0000FF&nbsp; &nbsp; &nbsp; &nbsp; FF0000&nbsp; &nbsp; &nbsp; &nbsp; FF3300&nbsp; &nbsp; &nbsp; &nbsp; FF6600&nbsp; &nbsp; &nbsp; &nbsp; FF9900&nbsp; &nbsp; &nbsp; &nbsp; FFCC00&nbsp; &nbsp; &nbsp; &nbsp; FFFF00&nbsp; &nbsp; &nbsp; &nbsp; FF0033&nbsp; &nbsp; &nbsp; &nbsp; FF3333&nbsp; &nbsp; &nbsp; &nbsp; FF6633&nbsp; &nbsp; &nbsp; &nbsp; FF9933&nbsp; &nbsp; &nbsp; &nbsp; FFCC33&nbsp; &nbsp; &nbsp; &nbsp; FFFF33&nbsp; &nbsp; &nbsp; &nbsp; FF0066&nbsp; &nbsp; &nbsp; &nbsp; FF3366&nbsp; &nbsp; &nbsp; &nbsp; FF6666&nbsp; &nbsp; &nbsp; &nbsp; FF9966&nbsp; &nbsp; &nbsp; &nbsp; FFCC66&nbsp; &nbsp; &nbsp; &nbsp; FFFF66<br>666666&nbsp; &nbsp; &nbsp; &nbsp; 00FF00&nbsp; &nbsp; &nbsp; &nbsp; 000099&nbsp; &nbsp; &nbsp; &nbsp; 003399&nbsp; &nbsp; &nbsp; &nbsp; 006699&nbsp; &nbsp; &nbsp; &nbsp; 009999&nbsp; &nbsp; &nbsp; &nbsp; 00CC99&nbsp; &nbsp; &nbsp; &nbsp; 00FF99&nbsp; &nbsp; &nbsp; &nbsp; 0000CC&nbsp; &nbsp; &nbsp; &nbsp; 0033CC&nbsp; &nbsp; &nbsp; &nbsp; 0066CC&nbsp; &nbsp; &nbsp; &nbsp; 0099CC&nbsp; &nbsp; &nbsp; &nbsp; 00CCCC&nbsp; &nbsp; &nbsp; &nbsp; 00FFCC&nbsp; &nbsp; &nbsp; &nbsp; 0000FF&nbsp; &nbsp; &nbsp; &nbsp; 0033FF&nbsp; &nbsp; &nbsp; &nbsp; 0066FF&nbsp; &nbsp; &nbsp; &nbsp; 0099FF&nbsp; &nbsp; &nbsp; &nbsp; 00CCFF&nbsp; &nbsp; &nbsp; &nbsp; 00FFFF<br>777777&nbsp; &nbsp; &nbsp; &nbsp; FF0000&nbsp; &nbsp; &nbsp; &nbsp; 330099&nbsp; &nbsp; &nbsp; &nbsp; 333399&nbsp; &nbsp; &nbsp; &nbsp; 336699&nbsp; &nbsp; &nbsp; &nbsp; 339999&nbsp; &nbsp; &nbsp; &nbsp; 33CC99&nbsp; &nbsp; &nbsp; &nbsp; 33FF99&nbsp; &nbsp; &nbsp; &nbsp; 3300CC&nbsp; &nbsp; &nbsp; &nbsp; 3333CC&nbsp; &nbsp; &nbsp; &nbsp; 3366CC&nbsp; &nbsp; &nbsp; &nbsp; 3399CC&nbsp; &nbsp; &nbsp; &nbsp; 33CCCC&nbsp; &nbsp; &nbsp; &nbsp; 33FFCC&nbsp; &nbsp; &nbsp; &nbsp; 3300FF&nbsp; &nbsp; &nbsp; &nbsp; 3333FF&nbsp; &nbsp; &nbsp; &nbsp; 3366FF&nbsp; &nbsp; &nbsp; &nbsp; 3399FF&nbsp; &nbsp; &nbsp; &nbsp; 33CCFF&nbsp; &nbsp; &nbsp; &nbsp; 33FFFF<br>888888&nbsp; &nbsp; &nbsp; &nbsp; 00FFFF&nbsp; &nbsp; &nbsp; &nbsp; 660099&nbsp; &nbsp; &nbsp; &nbsp; 663399&nbsp; &nbsp; &nbsp; &nbsp; 666699&nbsp; &nbsp; &nbsp; &nbsp; 669999&nbsp; &nbsp; &nbsp; &nbsp; 66CC99&nbsp; &nbsp; &nbsp; &nbsp; 66FF99&nbsp; &nbsp; &nbsp; &nbsp; 6600CC&nbsp; &nbsp; &nbsp; &nbsp; 6633CC&nbsp; &nbsp; &nbsp; &nbsp; 6666CC&nbsp; &nbsp; &nbsp; &nbsp; 6699CC&nbsp; &nbsp; &nbsp; &nbsp; 66CCCC&nbsp; &nbsp; &nbsp; &nbsp; 66FFCC&nbsp; &nbsp; &nbsp; &nbsp; 6600FF&nbsp; &nbsp; &nbsp; &nbsp; 6633FF&nbsp; &nbsp; &nbsp; &nbsp; 6666FF&nbsp; &nbsp; &nbsp; &nbsp; 6699FF&nbsp; &nbsp; &nbsp; &nbsp; 66CCFF&nbsp; &nbsp; &nbsp; &nbsp; 66FFFF<br>999999&nbsp; &nbsp; &nbsp; &nbsp; FFFF00&nbsp; &nbsp; &nbsp; &nbsp; 990099&nbsp; &nbsp; &nbsp; &nbsp; 993399&nbsp; &nbsp; &nbsp; &nbsp; 996699&nbsp; &nbsp; &nbsp; &nbsp; 999999&nbsp; &nbsp; &nbsp; &nbsp; 99CC99&nbsp; &nbsp; &nbsp; &nbsp; 99FF99&nbsp; &nbsp; &nbsp; &nbsp; 9900CC&nbsp; &nbsp; &nbsp; &nbsp; 9933CC&nbsp; &nbsp; &nbsp; &nbsp; 9966CC&nbsp; &nbsp; &nbsp; &nbsp; 9999CC&nbsp; &nbsp; &nbsp; &nbsp; 99CCCC&nbsp; &nbsp; &nbsp; &nbsp; 99FFCC&nbsp; &nbsp; &nbsp; &nbsp; 9900FF&nbsp; &nbsp; &nbsp; &nbsp; 9933FF&nbsp; &nbsp; &nbsp; &nbsp; 9966FF&nbsp; &nbsp; &nbsp; &nbsp; 9999FF&nbsp; &nbsp; &nbsp; &nbsp; 99CCFF&nbsp; &nbsp; &nbsp; &nbsp; 99FFFF<br>AAAAAA&nbsp; &nbsp; &nbsp; &nbsp; FF00FF&nbsp; &nbsp; &nbsp; &nbsp; CC0099&nbsp; &nbsp; &nbsp; &nbsp; CC3399&nbsp; &nbsp; &nbsp; &nbsp; CC6699&nbsp; &nbsp; &nbsp; &nbsp; CC9999&nbsp; &nbsp; &nbsp; &nbsp; CCCC99&nbsp; &nbsp; &nbsp; &nbsp; CCFF99&nbsp; &nbsp; &nbsp; &nbsp; CC00CC&nbsp; &nbsp; &nbsp; &nbsp; CC33CC&nbsp; &nbsp; &nbsp; &nbsp; CC66CC&nbsp; &nbsp; &nbsp; &nbsp; CC99CC&nbsp; &nbsp; &nbsp; &nbsp; CCCCCC&nbsp; &nbsp; &nbsp; &nbsp; CCFFCC&nbsp; &nbsp; &nbsp; &nbsp; CC00FF&nbsp; &nbsp; &nbsp; &nbsp; CC33FF&nbsp; &nbsp; &nbsp; &nbsp; CC66FF&nbsp; &nbsp; &nbsp; &nbsp; CC99FF&nbsp; &nbsp; &nbsp; &nbsp; CCCCFF&nbsp; &nbsp; &nbsp; &nbsp; CCFFFF<br>BBBBBB&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; FF0099&nbsp; &nbsp; &nbsp; &nbsp; FF3399&nbsp; &nbsp; &nbsp; &nbsp; FF6699&nbsp; &nbsp; &nbsp; &nbsp; FF9999&nbsp; &nbsp; &nbsp; &nbsp; FFCC99&nbsp; &nbsp; &nbsp; &nbsp; FFFF99&nbsp; &nbsp; &nbsp; &nbsp; FF00CC&nbsp; &nbsp; &nbsp; &nbsp; FF33CC&nbsp; &nbsp; &nbsp; &nbsp; FF66CC&nbsp; &nbsp; &nbsp; &nbsp; FF99CC&nbsp; &nbsp; &nbsp; &nbsp; FFCCCC&nbsp; &nbsp; &nbsp; &nbsp; FFFFCC&nbsp; &nbsp; &nbsp; &nbsp; FF00FF&nbsp; &nbsp; &nbsp; &nbsp; FF33FF&nbsp; &nbsp; &nbsp; &nbsp; FF66FF&nbsp; &nbsp; &nbsp; &nbsp; FF99FF&nbsp; &nbsp; &nbsp; &nbsp; FFCCFF&nbsp; &nbsp; &nbsp; &nbsp; FFFFFF<br><br><br>T0002目录下的文件说明<br><br>如果重装到一个新位置，只需将整个T0002拷贝过去就可以了,所有的个性化数据都在此目录下<br><br>Advhq.dat 星空图相关个性化数据<br>Block.cfg 板块设置文件<br>cbset.dat 筹码分析个性化数据<br>CoolInfo.Txt 系统备忘录<br>Line.dat 画线工具数据<br>MyFavZX.dat 资讯收藏夹数据<br>newmodem.ini 交易客户端个性化数据<br>padinfo.dat 定制版面个性化数据<br>PriCS.dat,PriGS.dat,PriText.dat 指标相关数据<br>recentsearch.dat 最近资讯搜索数据<br>Scheme.dat 配色方案<br>tmptdx.css 临时网页CSS文件<br>user.ini 全局个性化数据<br>userfx.dat K线图个性化数据<br>mark.dat 标识信息的存盘文件<br><br><br>以下文件与设置的预警信息有关：<br>Col_warn.dat<br>Col_warn_self.dat<br>Col_warn2.dat<br>ColwarnTj.dat<br><br>[blocknew] 板块目录<br>[cache] 系统数据高速缓存<br>[zst_cache] 分时图数据高速缓存<br>[coolinfo] 系统备忘录目录<br>[Invest] 个人理财数据目录<br>[PAD] 定制牘面存盘文件<br>通达信 飞狐 大智慧 分析家 指标函数一览 （指标爱好者必看<br>说明： H-飞狐 T-通达信&nbsp;&nbsp;D-大智慧 F-分析家<br>绘图函数<br><br><br>这组函数的功能是在主图或副图上设定条件输出图象、图标、直线、文字、数字、指标线、指标柱等，全部可以单独使用。<br><br>飞狐的强大功能，在此组函数中有淋漓尽致的发挥。无论在表面（美感），还是实质（提高工作效率）上，都有良好表现。 <br><br>毫无例外的是，这组函数中，都带有COND。CONDITION，条件，状态。COND在这里可作为条件理解。<br><br>为了能找到合适的COND，用于举例子，先介绍一组概念。<br><br>高点：在2N+1根K线中，中间这根K线的H，要大于等于左右N根K线的H。在N+1根K线中，有等高点出现，取最先出现的。<br><br>低点：在2N+1根K线中，中间这根K线的L，要小于等于左右N根K线的L。在N+1根K线中，有等低点出现，取最先出现的。<br><br>峰点：高点和低点，合称为峰点。<br><br>（这个定义，意合于技术分析的老祖宗道氏：“只要平均指数的最高点超过了前期的最高点，它就处于牛市时期；当最低点低于前期的最低点时，它处于熊市时期。”这里我们撇开向上、向下分形和分形峰状点等概念，以免把概念复杂化。）<br><br>也为了不让指标一来就过于复杂，我们先取N为2来做指标。简介到后面，可以看到，N是可以作为峰点指标的参数进行调整的。<br><br>指标名称：FENG2<br><br>指标说明：供引用<br><br>指标内容：<br><br>{峰点参数暂定为2}<br><br>A:=REF(H,2);{中间K线的最高价}<br><br>B:=A&gt;=REF(H,4) AND A&gt;=REF(H,3) AND A&gt;=REF(H,1) AND A&gt;=H;{中间K线的最高价大于等于两边共四根K线的最高价}<br><br>D:=BACKSET(B,3);{将当前位置和之前2个周期的数值设为1}<br><br>HD:FILTER(D,2);{找到高点后，过滤掉其后2周期内可能出现的等高点。输出高点}<br><br>A2:=REF(L,2);{中间K线的最低价}<br><br>B2:=A2&lt;=REF(L,4) AND A2&lt;=REF(L,3) AND A2&lt;=REF(L,1) AND A2&lt;=L;{中间K线的最低价小于等于两边共四根K线的最低价}<br><br>D2:=BACKSET(B2,3);{将当前位置和之前2个周期的数值设为1}<br><br>LD:FILTER(D2,2);{找到低点后，过滤掉其后2周期内可能出现的等低点。输出低点}<br><br>{后面有些例子，就从这个指标中引用信号。}<br><br>----------------------------------<br>H<br><br>函数：DRAWBKBMP <br><br>描述：设置背景图 <br><br>类别：绘图<br><br>说明：根据条件设置背景图<br><br>用法: DRAWBKBMP(COND,BMP);当图形上最后一组COND条件满足时,以MyBMP做背景。 <br><br>示例：DRAWBKBMP(C&gt;O, MyBMP);表示图形上最后一组C&gt;O时背景显示子FmlDLL目录下的MyBMP.bmp图。<br><br>----------------------------------<br>H<br><br>函数：DRAWGBK <br><br>描述：渐变背景色 <br><br>类别：绘图<br><br>说明：绘制渐变背景色 <br><br>用法: DRAWGBK(COND,COLOR1, COLOR2,D);当COND条件满足时,以COLOR1到COLOR2渐变色填充子图区域,D=0表示从左到右,D=1表示从上到下。<br><br>示例：DRAWGBK(C&gt;O, COLORRGB(255,0,0), COLORRGB(255,255,0),0);表示图形上最后一组C&gt;O时从左到右从红色到黄色渐变填充子图。<br><br>----------------------------------<br>H-F-T-D<br><br>函数：DRAWICON <br><br>描述：绘制小图标<br><br>类别：绘图<br><br>说明：在图形上绘制小图标<br><br>用法: DRAWICON(COND,PRICE,TYPE),当COND条件满足时,在PRICE位置画TYPE号图标。15种图标编码为1-15（1-3为小脸,4-5为上下箭头,6-7为红绿小旗,8-9为三角形,10-12为信号灯,13-15为O、X、四方形）。TYPE为字符串时可显示用户自制BMP图。<br><br>示例：DRAWICON(CLOSE&gt;OPEN,LOW,4)表示当收阳时在最低价位置画4号图标。<br><br>DRAWICON(C&gt;O, L, MyBMP)表示当收阳时在最低价位置画FmlDLL子目录下的自制图标MyBMP.BMP。<br><br>这个说明有点老了，飞狐升级飞快，以致帮助文件跟不上变化了。基本意思如说明一样，其它作些补充。<br><br>1、COND条件，一般是指判断的结果，不是0就是1。如用其它数据，大于等于1的，条件满足；小于1，条件就不满足。<br><br>2、TYPE图标，现在已经有12种，用下面的指标，在000829上可以全部显示出来。当TYPE取大于等于12的数时，都显示黄球。<br><br>当TYPE取0时，显示的是笑脸（这个指标中没有做进去，自己可以试一下）。<br><br>B:="FENG2.HD";<br><br>D:=BACKSET(ISLASTPERIOD,BARSLAST(B)+1);<br><br>A:=D&gt;REF(D,1);<br><br>DRAWICON(REF(A,1),1.05*H,1);<br><br>DRAWICON(REF(A,2),1.05*H,2);<br><br>DRAWICON(REF(A,3),1.05*H,3);<br><br>DRAWICON(REF(A,4),1.05*H,4);<br><br>DRAWICON(REF(A,5),1.05*H,5);<br><br>DRAWICON(REF(A,6),1.05*H,6);<br><br>DRAWICON(REF(A,7),1.05*H,7);<br><br>DRAWICON(REF(A,8),1.05*H,8);<br><br>DRAWICON(REF(A,9),1.05*H,9);<br><br>DRAWICON(REF(A,10),1.05*H,10);<br><br>DRAWICON(REF(A,11),1.05*H,11);<br><br>DRAWICON(REF(A,12),1.05*H,12);<br><br>DRAWICON(REF(A,13),1.05*H,13);<br><br>DRAWICON(REF(A,14),1.05*H,100);{主图叠加}<br><br>当红球和绿球连续显示时，立体感会强一些。<br><br>DRAWICON(C&gt;=MA(C,30),MA(C,30),10);<br><br>DRAWICON(C&lt;MA(C,30),MA(C,30),11);{主图叠加}<br><br>3、PRICE是用于定位图标的位置的。一般用1.01＊H，或者0.99*L等。现在可用ALIGN(0-5)指定对齐位置。<br><br>用这个指标来试（主图叠加）<br><br>B:="FENG2.HD";<br><br>D:=BACKSET(ISLASTPERIOD,BARSLAST(B)+1);<br><br>A:=D&gt;REF(D,1);<br><br>E:=REF(H,1);<br><br>DRAWICON(A,E,10),ALIGN0;<br><br>DRAWICON(A,E,11),ALIGN1;<br><br>DRAWICON(A,E,12),ALIGN2;<br><br>DRAWICON(A,E,3),ALIGN3;<br><br>DRAWICON(A,E,4),ALIGN4;<br><br>DRAWICON(A,E,5),ALIGN5;<br><br>可以初步得出结论：<br><br>ALIGN0：信号出现在PRICE的正中；<br><br>ALIGN1：信号出现在PRICE下边（十分靠近）；<br><br>ALIGN2：信号出现在PRICE上边（十分靠近）；<br><br>ALIGN3：信号出现在主图的中间；<br><br>ALIGN4：信号出现在主图的最上边；<br><br>ALIGN5：信号出现在主图的最下边；<br><br>在高低点上作图标，可以使高低点更明确了。<br><br>A:="FENG2.LD";<br><br>B:="FENG2.HD";<br><br>DRAWICON(A,L,11),ALIGN1;<br><br>DRAWICON(B,H,10),ALIGN2;{主图叠加}<br><br>4、可以自由调用MyBMP.BMP图到显示位置，大大增强了输出的效果。你只要看到好看的图，可以随时抓拍过来，做成BMP文件，放到FmlDLL子目录下，就可以调用了。<br><br>A:="FENG2.LD";<br><br>B:="FENG2.HD";<br><br>DRAWICON(A,L,PIG),ALIGN1;<br><br>DRAWICON(B,H,PIG),ALIGN2;{主图叠加。如果你没有PIG.BMP文件，则不可显示。}<br><br>DRAWICON(1,MA(C,5),S28);<br><br>DRAWICON(1,MA(C,10),S31);<br><br>DRAWICON(1,MA(C,20),S14);<br><br>DRAWICON(1,MA(C,30),S25);{主图叠加。如果你没有PIG.BMP文件，则不可显示。}<br><br>----------------------------------<br>H-F-T-D<br><br>函数：DRAWLINE <br><br>描述：绘制直线<br><br>类别：绘图<br><br>说明：在图形上绘制直线段<br><br>用法: DRAWLINE(COND1,PRICE1,COND2,PRICE2,EXPAND),当COND1条件满足时,在PRICE1位置画直线起点，当COND2条件满足时,在PRICE2位置画直线终点，EXPAND为延长类型。<br><br>示例：DRAWLINE(HIGH&gt;=HHV(HIGH,10),HIGH,LOW&lt;=LLV(LOW,10),LOW,1)表示在创10天新高与创10天新低之间画直线并且向右延长。 <br><br>DRAWLINE是唯一一个一句里面用到两个COND的绘图函数。因为它需要两个点来决定一直线。<br><br>COND1相当于指定K线位置（横坐标），PRICE1相当于是指定价位（纵坐标），这样一个点在平面上的位置就决定了。<br><br>DRAWLINE是从第一点画到第二点的，即有起点与终点的顺序关系：第一点出现的时间，要在第二点之前。否则线是画不出来的。<br><br>EXPAND，扩张、发展，这里是延伸的意思吧。一般取0，不延长；取1，延长。实际上是取大于等于1的数就延长，小于1就不延长。<br><br>DRAWLINE目前支持POINTDOT、LINETHICK、COLOR、SHIFT这四个描述函数。<br><br>举个例子吧。<br><br>A:="FENG2.LD";<br><br>B:="FENG2.HD";<br><br>DRAWICON(A,L,11),ALIGN1;<br><br>DRAWICON(B,H,10),ALIGN2;<br><br>D:=BACKSET(ISLASTPERIOD,BARSLAST(B)+1);<br><br>E:=D&gt;REF(D,1);<br><br>F:=BACKSET(E,REF(BARSLAST(B),1)+2);<br><br>G:=F&gt;REF(F,1);<br><br>DRAWLINE(G,H,E,H,1),pointdot,linethick1,coloryellow;{主图叠加}<br><br>这根线有些趋势线的意思了。由于趋势线的主观性颇强，只有多设参数才能满足多数人的要求。 <br><br>DRAWLINE画出的线，应该比手工画出的线精确一些。（DRAWLINE画线的灵敏度，要比手工画线低，所以说DRAWLINE画出的线精确，就未必对。）<br><br>主要用于画斜线，水平线我们一般可以另想办法。因为在图中显示直线，并非DRAWLINE的“专利”。<br><br>比如：<br><br>A:="FENG2.LD";<br><br>B:="FENG2.HD";<br><br>D:=BACKSET(ISLASTPERIOD,BARSLAST(A)+1);<br><br>E:=D&gt;REF(D,1);<br><br>F:=BACKSET(ISLASTPERIOD,BARSLAST(B)+1);<br><br>G:=F&gt;REF(F,1);<br><br>前高:REF(H,BARSLAST(G));<br><br>前低:REF(L,BARSLAST(E));{主图叠加}<br><br>----------------------------------<br>H<br><br>函数：DRAWNUMBER <br><br>描述：显示数字 <br><br>类别：绘图<br><br>说明：在图形上显示数字<br><br>用法: DRAWNUMBER(COND,PRICE,NUMBER,PRECISION),当COND条件满足时,在PRICE位置书写数字NUMBER（可以为常数或数组序列）,PRECISION为小数显示位数(取值范围0-3)。可ALIGN0-5定义对齐方式。<br><br>示例：DRAWNUMBER(CLOSE/OPEN&gt;1.08,HIGH,(CLOSE-REF(C,1))/REF(C,1)*100,2)表示当日涨幅大于8%时在最高价位置显示涨幅(相对开盘价的百分比)。<br><br>这个函数的特色是，在NUMBER位置可以放变量。<br><br>NUMBER,数字。DRAWNUMBER是DRAWTEXT的“兄弟”，也可以用ALIGN(0-5)来定义水平位置，方法相同。<br><br>A:="FENG2.LD";<br><br>B:="FENG2.HD";<br><br>DRAWICON(A,L,11),ALIGN1;<br><br>DRAWICON(B,H,10),ALIGN2;<br><br>D1:=BACKSET(ISLASTPERIOD,BARSLAST(B)+1);<br><br>E1:=D1&gt;REF(D1,1);{离目前最近的一个高点}<br><br>D2:=BACKSET(E1,REF(BARSLAST(B),1)+2);<br><br>E2:=D2&gt;REF(D2,1);{倒数第二个高点}<br><br>DRAWTEXT(E1,H*1.02,高点价：),COLORGREEN,ALIGN2;<br><br>DRAWNUMBER(E1,H*1.02,H,2),COLORGREEN,ALIGN1;<br><br>DRAWTEXT(E2,H*1.02,高点价：),COLORYELLOW,ALIGN2;<br><br>DRAWNUMBER(E2,H*1.02,H,2),COLORYELLOW,ALIGN1;{主图叠加}<br><br>----------------------------------<br>H-F-T-D<br><br>函数：DRAWTEXT <br><br>描述：加入文字<br><br>类别：绘图<br><br>说明：在图形上显示文字<br><br>用法: DRAWTEXT(COND,PRICE,TEXT),当COND条件满足时,在PRICE位置书写文字TEXT,可用\n换行,可ALIGN0-5定义对齐方式，分析家、通达信不可换行。<br><br>示例：DRAWTEXT(CLOSE/OPEN&gt;1.08,LOW,大阳线)表示当日涨幅大于8%时在最低价位置显示大阳线字样。<br><br>DRAWTEXT(CLOSE/OPEN&gt;1.08,LOW,好呀\n大涨啦)；可显示多行文本，用"\n"换行。<br><br>在某些满足条件的地方直接显示文字或字符，比显示图标要更直观一些。<br><br>此函数可以用ALIGN来定位水平位置。而ALIGN用在DRAWICON上定位的是高低的位置。<br><br>从下面例子可以看到，ALIGN(0~2)定义水平位置的意义：<br><br>ALIGN0：居中；<br><br>ALIGN1：偏右；<br><br>ALIGN2：偏左。<br><br>也可以用SHIFT函数进行向右水平移位。<br><br>所显示的文字或字符，可以用COLOR函数来定义颜色。至于文字的大小，则采用系统默认的大小，在此函数中无法定义。<br><br>此函数单独使用有其用途，与DRAWNUMBER配合应用时，效果更不错。后面介绍到DRAWNUMBER时再举例子。<br><br>A:="FENG2.LD";<br><br>B:="FENG2.HD";<br><br>DRAWICON(A,L,11),ALIGN1;<br><br>DRAWICON(B,H,10),ALIGN2;<br><br>D1:=BACKSET(ISLASTPERIOD,BARSLAST(B)+1);<br><br>E1:=D1&gt;REF(D1,1);{离目前最近的一个高点}<br><br>D2:=BACKSET(E1,REF(BARSLAST(B),1)+2);<br><br>E2:=D2&gt;REF(D2,1);{倒数第二个高点}<br><br>D3:=BACKSET(E2,REF(BARSLAST(B),1)+2);<br><br>E3:=D3&gt;REF(D3,1);{倒数第三个高点}<br><br>DRAWTEXT(E1,H*1.01,☆TEXT:),COLORRED,ALIGN0;<br><br>DRAWTEXT(E2,H*1.01,★TEXT:),COLORGREEN,ALIGN1;<br><br>DRAWTEXT(E3,H*1.01,▓TEXT:),COLORYELLOW,ALIGN2;{主图叠加}<br><br>----------------------------------<br>H<br><br>函数：DRAWYITEXT <br><br>描述：易学文字 <br><br>类别：绘图<br><br>说明：在图形上显示易学文字,可ALIGN0-3定义对齐方式<br><br>用法: DRAWYITEXT(COND,PRICE,CODE,TYPE),当COND条件满足时,在PRICE位置书写TYPE类型的CODE的对应文字。TYPE为常数，取0--1，分别表示计算的是干支、64卦，CODE为对应的代码。<br><br>示例：DRAWYITEXT(CLOSE/OPEN&gt;1.05,LOW, GANZHI(DATE*100, 2),0)表示当日涨幅大于5%时在最低价位置显示日干支。<br><br>DRAWYITEXT(REF(CLOSE,2)&gt;REF(OPEN,2) AND REF(CLOSE,1)&gt;REF(OPEN,1) AND CLOSE&gt;OPEN, LOW, KGUA(1, 1), 1 )表示连二阳时在最低价位置显示K线卦象。<br><br>-----------------------------------------------<br><br>H<br><br>函数：FILLRGN <br><br>描述：区间彩带 <br><br>类别：绘图<br><br>说明：绘制指标区间彩带<br><br>用法: FILLRGN(COND,PRICE1,PRICE2),当COND条件满足时,以COLOR填充PRICE1和PRICE2的区间。<br><br>示例：FILLRGN(MA1&gt;MA2, MA1,MA2),colorred 表示MA1&gt;MA2时以红色填充MA1和MA2之间的区域。<br><br>FILL，充满，填充。RGN可能是REGION，地区，地域。<br><br>用这个函数，再加DRAWICON可以调用BMP图象文件的功能，可以作出象风景一样的图。<br><br>这里举个简单的例子：<br><br>A:=MA(C,5);<br><br>B:=MA(C,10);<br><br>FILLRGN(1,H*1.01,H*1.02),COLORFFFF66;<br><br>FILLRGN(A&gt;=B,A,B),COLORMAGENTA;<br><br>FILLRGN(A&lt;B,A,B),COLORGREEN;<br><br>FILLRGN(1,L*0.99,L*0.98),COLORFF99CC;{主图叠加}<br><br>----------------------------------<br>H<br><br>函数：PARTLINE <br><br>描述：分段绘制指标线 <br><br>类别：绘图<br><br>说明：分段绘制指标线<br><br>用法: PARTLINE(COND,PRICE),满足COND条件绘制PRICE连线。<br><br>示例：PARTLINE(C&gt;REF(C,1),C),colorred表示收盘大于前收以红色绘制收盘价连线。<br><br>PART，部分，局部。值得一提的是，PARTLINE支持多种描述函数，如例所见。<br><br>A:=MA(C,5);<br><br>B:=MA(C,10);<br><br>PARTLINE(A&gt;=B,A),COLORRED,POINTDOT;<br><br>PARTLINE(A&gt;=B,B),COLORGREEN,CIRCLEDOT;<br><br>PARTLINE(A&lt;B,A),COLORGREEN,CROSSDOT,LINETHICK3;<br><br>PARTLINE(A&lt;B,B),COLORRED,SHIFT2;{主图叠加}<br><br>----------------------------------<br>H-F-T-D<br><br>函数：POLYLINE <br><br>描述：绘制折线段 <br><br>类别：绘图<br><br>说明：在图形上绘制折线段<br><br>用法: POLYLINE(COND,PRICE),当COND条件满足时,以PRICE位置为顶点画折线连接。<br><br>示例：POLYLINE(HIGH&gt;=HHV(HIGH,10),HIGH)表示在创10天新高点之间画折线。<br><br>POLY，多个的。<br><br>支持POINTDOT、LINETHICK、COLOR、SHIFT这四个描述函数。<br><br>A:="FENG2.LD";<br><br>B:="FENG2.HD";<br><br>DRAWICON(A,L,11),ALIGN1;<br><br>DRAWICON(B,H,10),ALIGN2;<br><br>POLYLINE(A,L),POINTDOT,COLORGREEN;<br><br>POLYLINE(B,H),LINETHICK2,COLORMAGENTA;{主图叠加}<br><br>----------------------------------<br>H-F-T-D<br><br>函数：STICKLINE <br><br>描述：绘制柱线<br><br>类别：绘图<br><br>说明：在图形上绘制柱线<br><br>用法: STICKLINE(COND,PRICE1,PRICE2,WIDTH,EMPTY),<br>当COND条件满足时,在PRICE1和PRICE2位置之间画柱状线，宽度为WIDTH可为0-100(10为标准间距),EMPTH不为0大于等于1则画空心柱。宽度为WIDTH(10为标准间距)。<br><br>示例：STICKLINE(CLOSE&gt;OPEN,CLOSE,OPEN,8,1)表示画K线中阳线的空心柱体部分。STICKLINE(CLOSE&gt;OPEN,HIGH,LOW,0.8,1)表示画K线中阳线的高低线部分。<br><br>说明三点：<br><br>1、PRICE1和PRICE2没有顺序关系，即何者在前何者在后都不影响语句的执行。<br><br>2、WIDTH宽度，支持小数。用1和用0.1，会有很大的差别。取7时和主图的K线宽度差不多。<br><br><br><br>以下的副图指标，画出的K线，与主图中显示的K线差不多。有些“主图叠加指标”，叠加在副图中也未尝不可了。<br><br>STICKLINE(C&gt;O OR (C=O AND C&gt;REF(C,1)),O,C,7,1),colorred;{画出红K实体}<br><br>STICKLINE((C&gt;O AND C&lt;&gt;H) OR (C=O AND C&gt;REF(C,1)),C,H,0.1,0),colorred;{画出红K上影线}<br><br>STICKLINE((C&gt;O AND L&lt;&gt;O) OR (C=O AND C&gt;REF(C,1)),L,O,0.1,0),colorred;{画出红K下影线}<br><br>STICKLINE(C&lt;O OR (C=O AND C&lt;=REF(C,1)),C,O,7,0),colorcyan;{画出青K实体}<br><br>STICKLINE(C&lt;O OR (C=O AND C&lt;=REF(C,1)),L,H,0.1,0),colorcyan;{画出青K影线。因为青K是实心的，所以影线从中穿过}<br><br>MA(C,5);<br><br>3、用STICKLINE可以用两种方法做出多色彩K线效果。<br><br>一种是横向的，将K线实体从O到C分为N等份，每个小格中放入不同的但比较连续的颜色。<br><br>这里随便举个例子，N取4，只对阳线加了效果。其它变化，道理是一样的。<br><br>A:=C-O;<br><br>B:=C&gt;O;<br><br>STICKLINE(B,O,O+A/4,8,0),COLORFF99FF;<br><br>STICKLINE(B,O+A/4,O+A*2/4,8,0),COLORFF00FF;<br><br>STICKLINE(B,O+A*2/4,O+A*3/4,8,0),COLOR9900FF;<br><br>STICKLINE(B,O+A*3/4,O+A,8,0),COLOR0000FF;{主图叠加}<br><br>还有一种方法就是纵向的了。先在较宽的K线中加颜色，然后把宽度逐步收窄，再加颜色覆盖以前的，这样从纵向看，一根K线中就有不同颜色了。效果做得好的，可以做到赏心悦目。<br><br>B:=C&gt;O;<br><br>STICKLINE(B,O,C,8,0),COLORFF99FF;<br><br>STICKLINE(B,O,C,6,0),COLORFF00FF;<br><br>STICKLINE(B,O,C,4,0),COLOR9900FF;<br><br>STICKLINE(B,O,C,2,0),COLOR0000FF;{主图叠加}<br><br>----------------------------------<br>H<br><br>函数：VERTLINE <br><br>描述：绘制垂直线段<br><br>类别：绘图<br><br>说明：在图形上绘制垂直线段<br><br>用法: VERTLINE(COND),在COND条件满足的周期处画垂直线。<br><br>示例：VERTLINE(HIGH&gt;=HHV(HIGH,20))表示在创20天新高时画垂直线。<br><br>VERTICAL，垂直的。<br><br>VERTLINE目前可以用POINTDOT、LINETHICK、COLOR、SHIFT这四个描述函数来描述。<br><br>这个函数，主要是用于画线看时间的。费波纳契周期，可以用这个函数画出来的。<br><br>这里举个例子，把日K线中每月的第一个交易日中，画一根垂直线。<br><br>A:=MONTH&gt;REF(MONTH,1);<br><br>VERTLINE(A),COLOR808040,POINTDOT;{主图叠加}<br><br>&nbsp;
</body>
</html>
